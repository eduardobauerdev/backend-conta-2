{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,6LAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/ui/alert.tsx"],"sourcesContent":["import * as React from 'react'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst alertVariants = cva(\n  'relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current',\n  {\n    variants: {\n      variant: {\n        default: 'bg-card text-card-foreground',\n        destructive:\n          'text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction Alert({\n  className,\n  variant,\n  ...props\n}: React.ComponentProps<'div'> & VariantProps<typeof alertVariants>) {\n  return (\n    <div\n      data-slot=\"alert\"\n      role=\"alert\"\n      className={cn(alertVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"alert-title\"\n      className={cn(\n        'col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDescription({\n  className,\n  ...props\n}: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"alert-description\"\n      className={cn(\n        'text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Alert, AlertTitle, AlertDescription }\n"],"names":[],"mappings":";;;;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,qOACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,GAAG,OAC8D;IACjE,qBACE,6LAAC;QACC,aAAU;QACV,MAAK;QACL,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;KAbS;AAeT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,+DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kGACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS","debugId":null}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/ui/badge.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst badgeVariants = cva(\n  'inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden',\n  {\n    variants: {\n      variant: {\n        default:\n          'border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90',\n        secondary:\n          'border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90',\n        destructive:\n          'border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'span'> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : 'span'\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;KAhBS","debugId":null}},
    {"offset": {"line": 163, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/lib/swr-config.ts"],"sourcesContent":["export const ATTR_CACHE_KEY = \"global-chat-attributions\"\nexport const CHAT_LIST_CACHE_KEY = \"global-chat-list\"\n\nexport type AtribuicoesMap = Record<\n  string,\n  {\n    assigned_to_id: string\n    assigned_to_name: string\n    assigned_to_cargo?: string\n    assigned_to_color?: string\n  }\n>\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,iBAAiB;AACvB,MAAM,sBAAsB","debugId":null}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/whatsapp/chat-list.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useEffect, useRef, useCallback, useMemo, forwardRef, type ElementRef } from \"react\" \nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\"\nimport { Input } from \"@/components/ui/input\"\nimport { Search, AlertCircle, RefreshCw, Loader2, User } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport type { Chat } from \"@/lib/whatsapp-types\"\nimport { Alert, AlertDescription } from \"@/components/ui/alert\"\nimport { Button } from \"@/components/ui/button\"\nimport { useWhatsAppCache } from \"@/contexts/whatsapp-cache-context\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { toast } from \"sonner\"\nimport { useRouter } from \"next/navigation\"\nimport { createClient } from \"@/lib/supabase/client\"\nimport useSWR, { mutate, useSWRConfig } from \"swr\"\nimport { ATTR_CACHE_KEY, CHAT_LIST_CACHE_KEY } from \"@/lib/swr-config\"\nimport type { AtribuicoesMap } from \"@/lib/swr-config\"\nimport { getCookie } from \"@/lib/auth\" \n\ninterface ChatListProps {\n  onSelectChat: (chat: Chat) => void\n  selectedChatId: string | null\n  refreshTrigger?: number\n  initialData?: any\n}\n\nconst INITIAL_BATCH_SIZE = 20\nconst SUBSEQUENT_BATCH_SIZE = 10\nconst SCROLL_THRESHOLD = 100\n\ntype ChatListHandle = ElementRef<\"div\">; \n\nconst ChatList = forwardRef<ChatListHandle, ChatListProps>(\n  ({ onSelectChat, selectedChatId, refreshTrigger, initialData }, ref) => { \n    const { data: cachedChats = initialData?.chats || [] } = useSWR(CHAT_LIST_CACHE_KEY)\n    const { data: assignmentsMap = initialData?.assignmentsMap || {} } = useSWR<AtribuicoesMap>(ATTR_CACHE_KEY)\n    \n    const { getCachedChats, setCachedChats, appendChats } = useWhatsAppCache()\n    const router = useRouter()\n    const { mutate: globalMutate } = useSWRConfig()\n\n    const [chats, setChats] = useState<Chat[]>(cachedChats)\n    const [searchQuery, setSearchQuery] = useState(\"\")\n    \n    const [filterMode, setFilterMode] = useState<\"all\" | \"mine\">(\"all\")\n    const [currentUserId, setCurrentUserId] = useState<string | null>(null)\n    const [isAuthLoaded, setIsAuthLoaded] = useState(false)\n    \n    const [loading, setLoading] = useState(true)\n    const [error, setError] = useState<string | null>(null)\n    const [loadingMore, setLoadingMore] = useState(false)\n    const [hasMore, setHasMore] = useState(true)\n    \n    // Offset agora funciona estritamente como o \"Limiar Visível\"\n    const [offset, setOffset] = useState(0)\n\n    const scrollContainerRef = (ref as React.RefObject<HTMLDivElement>) || useRef<HTMLDivElement>(null); \n    const isLoadingRef = useRef(false)\n\n    useEffect(() => {\n      const userIdFromCookie = getCookie(\"auth_user_id\")\n\n      if (userIdFromCookie) {\n        setCurrentUserId(userIdFromCookie) \n      }\n      \n      setIsAuthLoaded(true) \n    }, [])\n\n    // ✅ LÓGICA DE CORTE RÍGIDO (IGNORE MESSAGES)\n    // Se chegarem mensagens novas, o cachedChats atualiza.\n    // Este efeito garante que pegamos o cachedChats atualizado, mas cortamos (slice)\n    // exatamente no tamanho que o usuário pediu (offset ou inicial).\n    useEffect(() => {\n      if (cachedChats && cachedChats.length > 0) {\n        // Se offset for 0, usa o inicial (20). Se já rolou, usa o offset atual (30, 40...).\n        const strictLimit = offset === 0 ? INITIAL_BATCH_SIZE : offset;\n        \n        // Corta o array. Mensagens novas empurram as antigas para fora deste limite.\n        setChats(cachedChats.slice(0, strictLimit))\n        setLoading(false)\n      }\n    }, [cachedChats, offset])\n\n    useEffect(() => {\n      const loadInitialAssignments = async () => {\n        const supabase = createClient()\n\n        try {\n          const { data: activeAssignments, error } = await supabase\n            .from(\"chat_assignments\")\n            .select(\"*\")\n            .eq(\"status\", \"active\")\n\n          if (error || !activeAssignments || activeAssignments.length === 0) return\n\n          const userIds = Array.from(new Set(activeAssignments.map((a) => a.assigned_to_id)))\n          \n          const { data: profiles } = await supabase\n            .from(\"perfis\")\n            .select(\"id, nome, cargo\")\n            .in(\"id\", userIds)\n\n          const cargosUnicos = Array.from(new Set(profiles?.map((p) => p.cargo).filter(Boolean))) as string[]\n          const coresMap: Record<string, string> = {}\n\n          if (cargosUnicos.length > 0) {\n            const { data: cargosData } = await supabase\n              .from(\"cargos\")\n              .select(\"nome, cor\")\n              .in(\"nome\", cargosUnicos)\n              \n            cargosData?.forEach((c) => {\n              coresMap[c.nome] = c.cor\n            })\n          }\n\n          const newAssignmentsMap: AtribuicoesMap = {}\n          \n          activeAssignments.forEach((assignment) => {\n            const profile = profiles?.find((p) => p.id === assignment.assigned_to_id)\n            if (profile) {\n              newAssignmentsMap[assignment.chat_id] = {\n                assigned_to_id: assignment.assigned_to_id,\n                assigned_to_name: profile.nome,\n                assigned_to_cargo: profile.cargo,\n                assigned_to_color: profile.cargo ? coresMap[profile.cargo] : undefined,\n              }\n            }\n          })\n\n          mutate(ATTR_CACHE_KEY, newAssignmentsMap, false)\n        } catch (err) {\n          console.error(\"Erro ao carregar badges:\", err)\n        }\n      }\n\n      loadInitialAssignments()\n    }, [])\n\n    useEffect(() => {\n      const supabase = createClient()\n\n      const channel = supabase\n        .channel(\"chat_assignments_realtime\")\n        .on(\n          \"postgres_changes\",\n          {\n            event: \"*\",\n            schema: \"public\",\n            table: \"chat_assignments\",\n            filter: \"status=eq.active\",\n          },\n          async (payload) => {\n            const currentMap = assignmentsMap || {}\n\n            if (payload.eventType === \"INSERT\" || payload.eventType === \"UPDATE\") {\n              const assignment = payload.new as any\n\n              const { data: userData } = await supabase\n                .from(\"perfis\")\n                .select(\"nome, cargo\")\n                .eq(\"id\", assignment.assigned_to_id)\n                .single()\n\n              let cargoColor: string | undefined\n              if (userData?.cargo) {\n                const { data: cargoData } = await supabase\n                  .from(\"cargos\")\n                  .select(\"cor\")\n                  .eq(\"nome\", userData.cargo)\n                  .maybeSingle()\n                cargoColor = cargoData?.cor\n              }\n\n              mutate(\n                ATTR_CACHE_KEY,\n                {\n                  ...currentMap,\n                  [assignment.chat_id]: {\n                    assigned_to_id: assignment.assigned_to_id,\n                    assigned_to_name: userData?.nome || \"\",\n                    assigned_to_cargo: userData?.cargo,\n                    assigned_to_color: cargoColor,\n                  },\n                },\n                false,\n              )\n            } else if (payload.eventType === \"DELETE\") {\n              const assignment = payload.old as any\n              const newMap = { ...currentMap }\n              delete newMap[assignment.chat_id]\n\n              mutate(ATTR_CACHE_KEY, newMap, false)\n            }\n          },\n        )\n        .subscribe()\n\n      return () => {\n        supabase.removeChannel(channel)\n      }\n    }, [assignmentsMap])\n\n    useEffect(() => {\n      if (initialData?.assignmentsMap) {\n        globalMutate(ATTR_CACHE_KEY, initialData.assignmentsMap, { revalidate: false })\n      }\n    }, [initialData, globalMutate])\n\n    useEffect(() => {\n      if (initialData && refreshTrigger === 0) {\n        // Inicializa com o limite estrito de 20\n        const initialChats = (initialData.chats || []).slice(0, INITIAL_BATCH_SIZE)\n        setChats(initialChats)\n        setHasMore(initialData.hasMore || false)\n        setOffset(INITIAL_BATCH_SIZE) // Define o limite atual como 20\n        setLoading(false)\n        return\n      }\n\n      const cachedData = getCachedChats()\n\n      if (cachedData && refreshTrigger === 0) {\n        // Inicializa do cache com o limite estrito de 20\n        const initialCacheChats = cachedData.chats.slice(0, INITIAL_BATCH_SIZE)\n        setChats(initialCacheChats)\n        setHasMore(cachedData.hasMore)\n        setOffset(INITIAL_BATCH_SIZE) // Define o limite atual como 20\n        setLoading(false)\n        return\n      }\n\n      setChats([])\n      setOffset(0)\n      setHasMore(true)\n      loadChats(0, true)\n    }, [refreshTrigger, initialData])\n\n    const filteredChats = useMemo(() => {\n      let result = [...chats];\n\n      if (searchQuery.trim() !== \"\") {\n        result = result.filter((chat) => \n          chat.name.toLowerCase().includes(searchQuery.toLowerCase())\n        );\n      }\n\n      if (filterMode === \"mine\") {\n        if (!isAuthLoaded) {\n          return [];\n        } else if (currentUserId && assignmentsMap) {\n          result = result.filter((chat) => {\n            const assignment = assignmentsMap[chat.id];\n            return assignment && assignment.assigned_to_id === currentUserId;\n          });\n        } else if (isAuthLoaded && !currentUserId) {\n          return [];\n        }\n      }\n      \n      result.sort((a, b) => (b.lastMessageTime || 0) - (a.lastMessageTime || 0))\n\n      return result;\n    }, [chats, searchQuery, filterMode, assignmentsMap, currentUserId, isAuthLoaded]);\n\n    async function loadChats(currentOffset: number, isInitial = false) {\n      if (isLoadingRef.current) return\n      isLoadingRef.current = true\n      \n      if (!isInitial) setLoadingMore(true)\n\n      try {\n        const limit = isInitial ? INITIAL_BATCH_SIZE : SUBSEQUENT_BATCH_SIZE\n        const url = `/api/whatsapp/chats?limit=${limit}&offset=${currentOffset}`\n        \n        const response = await fetch(url)\n        const data = await response.json()\n\n        if (data.success) {\n          const newChats: Chat[] = data.chats || []\n          \n          // Calcula o novo tamanho total desejado\n          const newTotalSize = currentOffset + newChats.length\n\n          if (isInitial) {\n            setChats(newChats)\n            setCachedChats(newChats, data.hasMore || false, newChats.length)\n            mutate(CHAT_LIST_CACHE_KEY, newChats, { revalidate: false })\n          } else {\n            const updatedChats = [...chats, ...newChats]\n            setChats(updatedChats)\n            appendChats(newChats, data.hasMore || false)\n            mutate(CHAT_LIST_CACHE_KEY, updatedChats, { revalidate: false })\n          }\n\n          setHasMore(data.hasMore || false)\n          \n          // Se for inicial, garante que o offset seja pelo menos o tamanho do lote inicial\n          // Se for scroll, soma o que chegou\n          if (isInitial) {\n             setOffset(newChats.length)\n          } else {\n             setOffset(prev => prev + newChats.length)\n          }\n\n        } else {\n          const errorMessage = data.message || \"Erro ao carregar conversas\"\n          setError(errorMessage)\n          \n          if(isInitial) {\n            toast.error(\"WhatsApp não conectado\", {\n              description: errorMessage,\n              action: {\n                label: \"Ir para ajustes\",\n                onClick: () => router.push(\"/ajustes?tab=whatsapp\"),\n              },\n            })\n          }\n        }\n      } catch (err) {\n        setError(\"Não foi possível conectar ao servidor.\")\n        if (isInitial) {\n          toast.error(\"Erro de conexão\", { description: \"Verifique o backend.\" })\n        }\n      } finally {\n        setLoading(false)\n        setLoadingMore(false)\n        isLoadingRef.current = false\n      }\n    }\n\n    const handleScroll = useCallback(\n      (e: React.UIEvent<HTMLDivElement>) => {\n        const target = e.currentTarget\n        const scrollTop = target.scrollTop\n        const scrollHeight = target.scrollHeight\n        const clientHeight = target.clientHeight\n        const distanceFromBottom = scrollHeight - scrollTop - clientHeight\n\n        if (distanceFromBottom < SCROLL_THRESHOLD && hasMore && !isLoadingRef.current) {\n          // Usa o offset atual para buscar a próxima página\n          loadChats(offset, false)\n        }\n      },\n      [offset, hasMore],\n    )\n\n    function formatTime(timestamp: number | null) {\n      if (!timestamp) return \"\"\n      const date = new Date(timestamp)\n      const now = new Date()\n      const diff = now.getTime() - date.getTime()\n      const days = Math.floor(diff / (1000 * 60 * 60 * 24))\n\n      if (days === 0) return date.toLocaleTimeString(\"pt-BR\", { hour: \"2-digit\", minute: \"2-digit\" })\n      if (days === 1) return \"Ontem\"\n      if (days < 7) return date.toLocaleDateString(\"pt-BR\", { weekday: \"short\" })\n      return date.toLocaleDateString(\"pt-BR\", { day: \"2-digit\", month: \"2-digit\" })\n    }\n\n    if (loading || (filterMode === 'mine' && !isAuthLoaded)) {\n      return (\n        <div className=\"flex items-center justify-center h-full\">\n          <Loader2 className=\"w-6 h-6 animate-spin mr-2 text-primary\" />\n          <p className=\"text-muted-foreground\">Carregando conversas...</p>\n        </div>\n      )\n    }\n\n    if (error) {\n      return (\n        <div className=\"flex flex-col h-full p-4 gap-4\">\n          <Alert variant=\"destructive\">\n            <AlertCircle className=\"h-4 w-4\" />\n            <AlertDescription>{error}</AlertDescription>\n          </Alert>\n          <Button\n            onClick={() => {\n              setChats([])\n              setOffset(0)\n              setHasMore(true)\n              loadChats(0, true)\n            }}\n            variant=\"outline\"\n            className=\"w-full bg-transparent\"\n          >\n            <RefreshCw className=\"w-4 h-4 mr-2\" />\n            Tentar Novamente\n          </Button>\n        </div>\n      )\n    }\n\n    return (\n      <div className=\"flex flex-col h-full bg-background border-r\"> \n        {/* ✅ HEADER COMPACTO */}\n        <div className=\"flex flex-col border-b bg-background z-10 sticky top-0\">\n          <div className=\"p-3 pb-2\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n              <Input\n                placeholder=\"Buscar...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"pl-8 h-9\"\n              />\n            </div>\n          </div>\n          \n          <div className=\"px-3 pb-2 flex gap-2\">\n            <Button \n              variant={filterMode === 'all' ? \"secondary\" : \"ghost\"} \n              size=\"sm\" \n              onClick={() => setFilterMode('all')}\n              className={cn(\n                \"flex-1 h-7 text-xs font-medium transition-all\",\n                filterMode === 'all' && \"bg-secondary hover:bg-secondary/80 shadow-sm\"\n              )}\n            >\n              Todas\n            </Button>\n            <Button \n              variant={filterMode === 'mine' ? \"secondary\" : \"ghost\"} \n              size=\"sm\" \n              onClick={() => setFilterMode('mine')}\n              className={cn(\n                \"flex-1 h-7 text-xs font-medium transition-all\",\n                filterMode === 'mine' && \"bg-secondary hover:bg-secondary/80 shadow-sm\"\n              )}\n            >\n              Minhas\n            </Button>\n          </div>\n        </div>\n\n        <div\n          ref={scrollContainerRef} \n          onScroll={handleScroll}\n          className=\"flex-1 overflow-y-auto\" \n          style={{\n            overscrollBehavior: \"contain\",\n            WebkitOverflowScrolling: \"touch\",\n            scrollBehavior: \"smooth\",\n          }}\n        >\n          {filteredChats.length === 0 ? (\n            <div className=\"p-6 text-center space-y-3 flex flex-col items-center\">\n              <p className=\"text-muted-foreground text-sm\">\n                {searchQuery \n                  ? \"Nenhuma conversa encontrada\" \n                  : filterMode === 'mine' \n                  ? \"Sem conversas atribuídas\" \n                  : \"Nenhuma conversa disponível\"}\n              </p>\n              \n              {hasMore ? (\n                <Button\n                  onClick={() => loadChats(offset, false)}\n                  variant=\"outline\"\n                  size=\"sm\"\n                  disabled={loadingMore}\n                >\n                  {loadingMore ? <Loader2 className=\"w-4 h-4 animate-spin mr-2\" /> : <RefreshCw className=\"w-4 h-4 mr-2\" />}\n                  Buscar mais\n                </Button>\n              ) : (\n                <Button\n                  onClick={() => {\n                    setFilterMode('all')\n                    setSearchQuery('')\n                  }}\n                  variant=\"ghost\"\n                  size=\"sm\"\n                >\n                  Limpar filtros\n                </Button>\n              )}\n            </div>\n          ) : (\n            <>\n              {/* ✅ LISTA COMPACTA DE CHATS */}\n              <div className=\"py-1\">\n                {filteredChats.map((chat) => {\n                  const assignment = assignmentsMap?.[chat.id]\n                  const profilePicture = chat.pictureUrl || chat.profilePic || null\n\n                  return (\n                    <button\n                      key={chat.id}\n                      onClick={() => onSelectChat(chat)} \n                      className={cn(\n                        \"w-full flex items-center gap-2.5 px-3 py-2 transition-colors text-left hover:bg-accent/50\",\n                        selectedChatId === chat.id && \"bg-accent\",\n                        chat.unreadCount > 0 && \"border-l-2 border-primary bg-primary/5\"\n                      )}\n                    >\n                      {/* ✅ AVATAR MENOR (40x40) */}\n                      <Avatar className=\"w-10 h-10 flex-shrink-0\">\n                        {profilePicture && <AvatarImage src={profilePicture} alt={chat.name} />}\n                        <AvatarFallback className=\"bg-primary text-primary-foreground text-sm\">\n                          {chat.name.charAt(0).toUpperCase()}\n                        </AvatarFallback>\n                      </Avatar>\n\n                      <div className=\"flex-1 min-w-0\">\n                        {/* ✅ NOME + HORA (uma linha) */}\n                        <div className=\"flex items-center justify-between gap-2 mb-0.5\">\n                          <p className=\"font-medium truncate text-sm\">{chat.name}</p>\n                          <span className=\"text-[11px] text-muted-foreground flex-shrink-0\">\n                            {formatTime(chat.lastMessageTime)}\n                          </span>\n                        </div>\n\n                        {/* ✅ MENSAGEM/BADGE + CONTADOR */}\n                        <div className=\"flex items-center justify-between gap-1.5\">\n                          {assignment ? (\n                            <Badge\n                              variant=\"secondary\"\n                              className=\"text-[10px] px-1.5 py-0 h-5 flex items-center gap-1 border\"\n                              style={{\n                                backgroundColor: assignment.assigned_to_color || \"#6366f1\",\n                                color: \"#ffffff\",\n                                borderColor: assignment.assigned_to_color || \"#6366f1\",\n                              }}\n                            >\n                              <User className=\"w-2.5 h-2.5\" />\n                              <span className=\"max-w-[100px] truncate\">{assignment.assigned_to_name}</span>\n                            </Badge>\n                          ) : (\n                            <p className=\"text-xs text-muted-foreground truncate flex-1 min-w-0\">\n                              {chat.lastMessage || \"Sem mensagens\"}\n                            </p>\n                          )}\n\n                          {chat.unreadCount > 0 && (\n                            <span className=\"flex-shrink-0 bg-primary text-primary-foreground text-[10px] font-semibold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1\">\n                              {chat.unreadCount > 99 ? \"99+\" : chat.unreadCount}\n                            </span>\n                          )}\n                        </div>\n                      </div>\n                    </button>\n                  )\n                })}\n              </div>\n\n              {loadingMore && (\n                <div className=\"flex items-center justify-center gap-2 py-3\">\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  <p className=\"text-xs text-muted-foreground\">Carregando...</p>\n                </div>\n              )}\n\n              {!hasMore && filteredChats.length > 0 && (\n                <div className=\"text-center py-3\">\n                  <p className=\"text-[11px] text-muted-foreground\">Fim da lista</p>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    )\n  }\n)\n\nChatList.displayName = 'ChatList'; \n\nexport { ChatList };"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 987, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Textarea({ className, ...props }: React.ComponentProps<'textarea'>) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        'border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAyC;IACzE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,ucACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS","debugId":null}},
    {"offset": {"line": 1017, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/ui/scroll-area.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as ScrollAreaPrimitive from '@radix-ui/react-scroll-area'\n\nimport { cn } from '@/lib/utils'\n\nfunction ScrollArea({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {\n  return (\n    <ScrollAreaPrimitive.Root\n      data-slot=\"scroll-area\"\n      className={cn('relative', className)}\n      {...props}\n    >\n      <ScrollAreaPrimitive.Viewport\n        data-slot=\"scroll-area-viewport\"\n        className=\"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1\"\n      >\n        {children}\n      </ScrollAreaPrimitive.Viewport>\n      <ScrollBar />\n      <ScrollAreaPrimitive.Corner />\n    </ScrollAreaPrimitive.Root>\n  )\n}\n\nfunction ScrollBar({\n  className,\n  orientation = 'vertical',\n  ...props\n}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {\n  return (\n    <ScrollAreaPrimitive.ScrollAreaScrollbar\n      data-slot=\"scroll-area-scrollbar\"\n      orientation={orientation}\n      className={cn(\n        'flex touch-none p-px transition-colors select-none',\n        orientation === 'vertical' &&\n          'h-full w-2.5 border-l border-l-transparent',\n        orientation === 'horizontal' &&\n          'h-2.5 flex-col border-t border-t-transparent',\n        className,\n      )}\n      {...props}\n    >\n      <ScrollAreaPrimitive.ScrollAreaThumb\n        data-slot=\"scroll-area-thumb\"\n        className=\"bg-border relative flex-1 rounded-full\"\n      />\n    </ScrollAreaPrimitive.ScrollAreaScrollbar>\n  )\n}\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OACmD;IACtD,qBACE,6LAAC,qLAAwB;QACvB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,YAAY;QACzB,GAAG,KAAK;;0BAET,6LAAC,yLAA4B;gBAC3B,aAAU;gBACV,WAAU;0BAET;;;;;;0BAEH,6LAAC;;;;;0BACD,6LAAC,uLAA0B;;;;;;;;;;;AAGjC;KArBS;AAuBT,SAAS,UAAU,EACjB,SAAS,EACT,cAAc,UAAU,EACxB,GAAG,OACkE;IACrE,qBACE,6LAAC,oMAAuC;QACtC,aAAU;QACV,aAAa;QACb,WAAW,IAAA,qHAAE,EACX,sDACA,gBAAgB,cACd,8CACF,gBAAgB,gBACd,gDACF;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,gMAAmC;YAClC,aAAU;YACV,WAAU;;;;;;;;;;;AAIlB;MAzBS","debugId":null}},
    {"offset": {"line": 1095, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/whatsapp/quick-replies-panel.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\nimport { Loader2, ChevronRight, ChevronDown } from \"lucide-react\"\nimport { toast } from \"sonner\"\n\ninterface QuickRepliesPanelProps {\n  onSelectReply: (message: string) => void\n}\n\ninterface QuickReply {\n  id: string\n  title: string\n  message: string\n  category_id: string\n  category: {\n    id: string\n    name: string\n  }\n  created_by_name: string\n}\n\ninterface Category {\n  id: string\n  name: string\n}\n\nexport function QuickRepliesPanel({ onSelectReply }: QuickRepliesPanelProps) {\n  const [replies, setReplies] = useState<QuickReply[]>([])\n  const [categories, setCategories] = useState<Category[]>([])\n  const [loading, setLoading] = useState(true)\n  const [expandedCategories, setExpandedCategories] = useState<Set<string>>(new Set())\n\n  useEffect(() => {\n    loadData()\n  }, [])\n\n  async function loadData() {\n    try {\n      setLoading(true)\n\n      const [repliesRes, categoriesRes] = await Promise.all([\n        fetch(\"/api/whatsapp/quick-replies\"),\n        fetch(\"/api/whatsapp/quick-reply-categories\"),\n      ])\n\n      const repliesData = await repliesRes.json()\n      const categoriesData = await categoriesRes.json()\n\n      if (repliesData.success) {\n        setReplies(repliesData.replies || [])\n      }\n\n      if (categoriesData.success) {\n        setCategories(categoriesData.categories || [])\n      }\n    } catch (error) {\n      console.error(\"Erro ao carregar dados:\", error)\n      toast.error(\"Erro ao carregar respostas rápidas\")\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const toggleCategory = (categoryId: string) => {\n    setExpandedCategories((prev) => {\n      const newSet = new Set(prev)\n      if (newSet.has(categoryId)) {\n        newSet.delete(categoryId)\n      } else {\n        newSet.add(categoryId)\n      }\n      return newSet\n    })\n  }\n\n  if (loading) {\n    return (\n      <div className=\"h-full flex items-center justify-center\">\n        <Loader2 className=\"w-6 h-6 animate-spin text-muted-foreground\" />\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"h-full flex flex-col\">\n      <div className=\"p-4 border-b\">\n        <h3 className=\"font-semibold\">Respostas Rápidas</h3>\n        <p className=\"text-xs text-muted-foreground\">Clique na categoria para expandir</p>\n      </div>\n\n      <ScrollArea className=\"flex-1\">\n        <div className=\"p-2\">\n          {categories.map((category) => {\n            const categoryReplies = replies.filter((r) => r.category?.id === category.id)\n            const isExpanded = expandedCategories.has(category.id)\n\n            if (categoryReplies.length === 0) return null\n\n            return (\n              <div key={category.id} className=\"mb-2\">\n                <Button\n                  variant=\"ghost\"\n                  className=\"w-full justify-between text-left h-auto py-2 px-3 hover:bg-accent\"\n                  onClick={() => toggleCategory(category.id)}\n                >\n                  <span className=\"font-medium text-sm\">{category.name}</span>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-xs text-muted-foreground\">({categoryReplies.length})</span>\n                    {isExpanded ? (\n                      <ChevronDown className=\"w-4 h-4 text-muted-foreground\" />\n                    ) : (\n                      <ChevronRight className=\"w-4 h-4 text-muted-foreground\" />\n                    )}\n                  </div>\n                </Button>\n\n                {isExpanded && (\n                  <div className=\"ml-2 mt-1 space-y-1\">\n                    {categoryReplies.map((reply) => (\n                      <Button\n                        key={reply.id}\n                        variant=\"outline\"\n                        className=\"w-full justify-start text-left h-auto py-3 px-4 hover:bg-accent bg-transparent\"\n                        onClick={() => onSelectReply(reply.message)}\n                      >\n                        <div className=\"flex flex-col gap-1 w-full\">\n                          <div className=\"font-medium text-sm\">{reply.title}</div>\n                          <div className=\"text-xs text-muted-foreground line-clamp-2\">{reply.message}</div>\n                        </div>\n                      </Button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </ScrollArea>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1343, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/ui/sheet.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SheetPrimitive from '@radix-ui/react-dialog'\nimport { XIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Sheet({ ...props }: React.ComponentProps<typeof SheetPrimitive.Root>) {\n  return <SheetPrimitive.Root data-slot=\"sheet\" {...props} />\n}\n\nfunction SheetTrigger({\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Trigger>) {\n  return <SheetPrimitive.Trigger data-slot=\"sheet-trigger\" {...props} />\n}\n\nfunction SheetClose({\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Close>) {\n  return <SheetPrimitive.Close data-slot=\"sheet-close\" {...props} />\n}\n\nfunction SheetPortal({\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Portal>) {\n  return <SheetPrimitive.Portal data-slot=\"sheet-portal\" {...props} />\n}\n\nfunction SheetOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Overlay>) {\n  return (\n    <SheetPrimitive.Overlay\n      data-slot=\"sheet-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SheetContent({\n  className,\n  children,\n  side = 'right',\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Content> & {\n  side?: 'top' | 'right' | 'bottom' | 'left'\n}) {\n  return (\n    <SheetPortal>\n      <SheetOverlay />\n      <SheetPrimitive.Content\n        data-slot=\"sheet-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500',\n          side === 'right' &&\n            'data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm',\n          side === 'left' &&\n            'data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm',\n          side === 'top' &&\n            'data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b',\n          side === 'bottom' &&\n            'data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        <SheetPrimitive.Close className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none\">\n          <XIcon className=\"size-4\" />\n          <span className=\"sr-only\">Close</span>\n        </SheetPrimitive.Close>\n      </SheetPrimitive.Content>\n    </SheetPortal>\n  )\n}\n\nfunction SheetHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"sheet-header\"\n      className={cn('flex flex-col gap-1.5 p-4', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SheetFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"sheet-footer\"\n      className={cn('mt-auto flex flex-col gap-2 p-4', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SheetTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Title>) {\n  return (\n    <SheetPrimitive.Title\n      data-slot=\"sheet-title\"\n      className={cn('text-foreground font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SheetDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Description>) {\n  return (\n    <SheetPrimitive.Description\n      data-slot=\"sheet-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sheet,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,MAAM,EAAE,GAAG,OAAyD;IAC3E,qBAAO,6LAAC,6KAAmB;QAAC,aAAU;QAAS,GAAG,KAAK;;;;;;AACzD;KAFS;AAIT,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,6LAAC,gLAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;MAJS;AAMT,SAAS,WAAW,EAClB,GAAG,OAC+C;IAClD,qBAAO,6LAAC,8KAAoB;QAAC,aAAU;QAAe,GAAG,KAAK;;;;;;AAChE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6LAAC,+KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OACiD;IACpD,qBACE,6LAAC,gLAAsB;QACrB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,aAAa,EACpB,SAAS,EACT,QAAQ,EACR,OAAO,OAAO,EACd,GAAG,OAGJ;IACC,qBACE,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,gLAAsB;gBACrB,aAAU;gBACV,WAAW,IAAA,qHAAE,EACX,8MACA,SAAS,WACP,oIACF,SAAS,UACP,iIACF,SAAS,SACP,4GACF,SAAS,YACP,qHACF;gBAED,GAAG,KAAK;;oBAER;kCACD,6LAAC,8KAAoB;wBAAC,WAAU;;0CAC9B,6LAAC,4MAAK;gCAAC,WAAU;;;;;;0CACjB,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKpC;MAnCS;AAqCT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,6BAA6B;QAC1C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,mCAAmC;QAChD,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,6LAAC,8KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACqD;IACxD,qBACE,6LAAC,oLAA0B;QACzB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MAXS","debugId":null}},
    {"offset": {"line": 1545, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/whatsapp/message-bubble.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\nimport { Check, CheckCheck, Download, FileText, Music, Video, ImageIcon } from \"lucide-react\"\n\ninterface Message {\n  id: string\n  body: string\n  timestamp: number\n  fromMe: boolean\n  ack: number\n  from?: string\n  type?: string\n  hasMedia?: boolean\n  mediaUrl?: string | null\n  mimeType?: string | null\n  caption?: string | null\n}\n\ninterface MessageBubbleProps {\n  message: Message\n}\n\nexport function MessageBubble({ message }: MessageBubbleProps) {\n  const time = new Date(message.timestamp).toLocaleTimeString(\"pt-BR\", {\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  })\n\n  const getMediaType = () => {\n    if (!message.mimeType) return null\n    if (message.mimeType.startsWith(\"image/\")) return \"image\"\n    if (message.mimeType.startsWith(\"video/\")) return \"video\"\n    if (message.mimeType.startsWith(\"audio/\")) return \"audio\"\n    return \"document\"\n  }\n\n  const mediaType = getMediaType()\n\n  const renderMediaIcon = () => {\n    switch (mediaType) {\n      case \"image\":\n        return <ImageIcon className=\"w-4 h-4\" />\n      case \"video\":\n        return <Video className=\"w-4 h-4\" />\n      case \"audio\":\n        return <Music className=\"w-4 h-4\" />\n      case \"document\":\n        return <FileText className=\"w-4 h-4\" />\n      default:\n        return null\n    }\n  }\n\n  return (\n    <div className={cn(\"flex\", message.fromMe ? \"justify-end\" : \"justify-start\")}>\n      <div\n        className={cn(\n          \"max-w-[70%] rounded-lg px-4 py-2\",\n          message.fromMe ? \"bg-primary text-primary-foreground\" : \"bg-muted\",\n        )}\n      >\n        {!message.fromMe && message.from && <p className=\"text-xs font-medium mb-1 opacity-70\">{message.from}</p>}\n\n        {message.hasMedia && message.mediaUrl && (\n          <div className=\"mb-2\">\n            {mediaType === \"image\" && (\n              <img\n                src={message.mediaUrl || \"/placeholder.svg\"}\n                alt=\"Imagem\"\n                className=\"rounded-lg max-w-full h-auto max-h-[300px] object-contain\"\n                loading=\"lazy\"\n              />\n            )}\n            {mediaType === \"video\" && (\n              <video controls className=\"rounded-lg max-w-full h-auto max-h-[300px]\">\n                <source src={message.mediaUrl} type={message.mimeType || \"video/mp4\"} />\n                Seu navegador não suporta reprodução de vídeo.\n              </video>\n            )}\n            {mediaType === \"audio\" && (\n              <audio controls className=\"w-full\">\n                <source src={message.mediaUrl} type={message.mimeType || \"audio/mpeg\"} />\n                Seu navegador não suporta reprodução de áudio.\n              </audio>\n            )}\n            {mediaType === \"document\" && (\n              <a\n                href={message.mediaUrl}\n                download\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className={cn(\n                  \"flex items-center gap-2 p-2 rounded border\",\n                  message.fromMe\n                    ? \"bg-primary-foreground/10 border-primary-foreground/20\"\n                    : \"bg-background/50 border-border\",\n                )}\n              >\n                <FileText className=\"w-5 h-5\" />\n                <span className=\"text-sm flex-1\">Documento</span>\n                <Download className=\"w-4 h-4\" />\n              </a>\n            )}\n          </div>\n        )}\n\n        {(message.caption || message.body) && (\n          <p className=\"text-sm whitespace-pre-wrap break-words\">{message.caption || message.body}</p>\n        )}\n\n        <div className={cn(\"flex items-center gap-1 mt-1\", message.fromMe ? \"justify-end\" : \"justify-start\")}>\n          <span className={cn(\"text-xs\", message.fromMe ? \"text-primary-foreground/70\" : \"text-muted-foreground\")}>\n            {time}\n          </span>\n          {message.fromMe && (\n            <span className=\"text-primary-foreground/70\">\n              {message.ack >= 3 ? (\n                <CheckCheck className=\"w-4 h-4 text-blue-400\" />\n              ) : message.ack >= 2 ? (\n                <CheckCheck className=\"w-4 h-4\" />\n              ) : (\n                <Check className=\"w-4 h-4\" />\n              )}\n            </span>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AAoBO,SAAS,cAAc,EAAE,OAAO,EAAsB;IAC3D,MAAM,OAAO,IAAI,KAAK,QAAQ,SAAS,EAAE,kBAAkB,CAAC,SAAS;QACnE,MAAM;QACN,QAAQ;IACV;IAEA,MAAM,eAAe;QACnB,IAAI,CAAC,QAAQ,QAAQ,EAAE,OAAO;QAC9B,IAAI,QAAQ,QAAQ,CAAC,UAAU,CAAC,WAAW,OAAO;QAClD,IAAI,QAAQ,QAAQ,CAAC,UAAU,CAAC,WAAW,OAAO;QAClD,IAAI,QAAQ,QAAQ,CAAC,UAAU,CAAC,WAAW,OAAO;QAClD,OAAO;IACT;IAEA,MAAM,YAAY;IAElB,MAAM,kBAAkB;QACtB,OAAQ;YACN,KAAK;gBACH,qBAAO,6LAAC,wNAAS;oBAAC,WAAU;;;;;;YAC9B,KAAK;gBACH,qBAAO,6LAAC,gNAAK;oBAAC,WAAU;;;;;;YAC1B,KAAK;gBACH,qBAAO,6LAAC,gNAAK;oBAAC,WAAU;;;;;;YAC1B,KAAK;gBACH,qBAAO,6LAAC,6NAAQ;oBAAC,WAAU;;;;;;YAC7B;gBACE,OAAO;QACX;IACF;IAEA,qBACE,6LAAC;QAAI,WAAW,IAAA,qHAAE,EAAC,QAAQ,QAAQ,MAAM,GAAG,gBAAgB;kBAC1D,cAAA,6LAAC;YACC,WAAW,IAAA,qHAAE,EACX,oCACA,QAAQ,MAAM,GAAG,uCAAuC;;gBAGzD,CAAC,QAAQ,MAAM,IAAI,QAAQ,IAAI,kBAAI,6LAAC;oBAAE,WAAU;8BAAuC,QAAQ,IAAI;;;;;;gBAEnG,QAAQ,QAAQ,IAAI,QAAQ,QAAQ,kBACnC,6LAAC;oBAAI,WAAU;;wBACZ,cAAc,yBACb,6LAAC;4BACC,KAAK,QAAQ,QAAQ,IAAI;4BACzB,KAAI;4BACJ,WAAU;4BACV,SAAQ;;;;;;wBAGX,cAAc,yBACb,6LAAC;4BAAM,QAAQ;4BAAC,WAAU;;8CACxB,6LAAC;oCAAO,KAAK,QAAQ,QAAQ;oCAAE,MAAM,QAAQ,QAAQ,IAAI;;;;;;gCAAe;;;;;;;wBAI3E,cAAc,yBACb,6LAAC;4BAAM,QAAQ;4BAAC,WAAU;;8CACxB,6LAAC;oCAAO,KAAK,QAAQ,QAAQ;oCAAE,MAAM,QAAQ,QAAQ,IAAI;;;;;;gCAAgB;;;;;;;wBAI5E,cAAc,4BACb,6LAAC;4BACC,MAAM,QAAQ,QAAQ;4BACtB,QAAQ;4BACR,QAAO;4BACP,KAAI;4BACJ,WAAW,IAAA,qHAAE,EACX,8CACA,QAAQ,MAAM,GACV,0DACA;;8CAGN,6LAAC,6NAAQ;oCAAC,WAAU;;;;;;8CACpB,6LAAC;oCAAK,WAAU;8CAAiB;;;;;;8CACjC,6LAAC,yNAAQ;oCAAC,WAAU;;;;;;;;;;;;;;;;;;gBAM3B,CAAC,QAAQ,OAAO,IAAI,QAAQ,IAAI,mBAC/B,6LAAC;oBAAE,WAAU;8BAA2C,QAAQ,OAAO,IAAI,QAAQ,IAAI;;;;;;8BAGzF,6LAAC;oBAAI,WAAW,IAAA,qHAAE,EAAC,gCAAgC,QAAQ,MAAM,GAAG,gBAAgB;;sCAClF,6LAAC;4BAAK,WAAW,IAAA,qHAAE,EAAC,WAAW,QAAQ,MAAM,GAAG,+BAA+B;sCAC5E;;;;;;wBAEF,QAAQ,MAAM,kBACb,6LAAC;4BAAK,WAAU;sCACb,QAAQ,GAAG,IAAI,kBACd,6LAAC,mOAAU;gCAAC,WAAU;;;;;uCACpB,QAAQ,GAAG,IAAI,kBACjB,6LAAC,mOAAU;gCAAC,WAAU;;;;;qDAEtB,6LAAC,gNAAK;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQjC;KA3GgB","debugId":null}},
    {"offset": {"line": 1790, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/ui/dialog.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { XIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn('text-lg leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,6LAAC,6KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,6LAAC,gLAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;MAJS;AAMT,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,6LAAC,+KAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,6LAAC,gLAAuB;QACtB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,6LAAC;QAAa,aAAU;;0BACtB,6LAAC;;;;;0BACD,6LAAC,gLAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,qHAAE,EACX,+WACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,6LAAC,8KAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,6LAAC,4MAAK;;;;;0CACN,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;MAhCS;AAkCT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,6LAAC,8KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,6LAAC,oLAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MAXS","debugId":null}},
    {"offset": {"line": 1996, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/whatsapp/assignment-history-dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\"\nimport { ScrollArea } from \"@/components/ui/scroll-area\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Loader2, UserPlus, ArrowRightLeft, UserMinus, CheckCircle } from \"lucide-react\"\nimport { formatDistanceToNow } from \"date-fns\"\nimport { ptBR } from \"date-fns/locale\"\nimport { toast } from \"sonner\"\n\n//\n\ninterface AssignmentLog {\n  id: string\n  chat_id: string\n  chat_name: string\n  action: string\n  from_user_id: string | null\n  from_user_name: string | null\n  to_user_id: string | null\n  to_user_name: string | null\n  performed_by_id: string | null\n  performed_by_name: string | null\n  notes: string | null\n  created_at: string\n}\n\ninterface AssignmentHistoryDialogProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  chatId: string\n  chatName: string\n}\n\nexport function AssignmentHistoryDialog({ open, onOpenChange, chatId, chatName }: AssignmentHistoryDialogProps) {\n  const [logs, setLogs] = useState<AssignmentLog[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    if (open && chatId) {\n      loadLogs()\n    }\n  }, [open, chatId])\n\n  async function loadLogs() {\n    try {\n      setLoading(true)\n      const response = await fetch(`/api/whatsapp/assignment-logs?chatId=${chatId}`)\n\n      if (!response.ok) {\n        console.error(\"[API] Erro ao buscar logs:\", response.status)\n        toast.error(\"Erro ao carregar histórico\")\n        return\n      }\n      const text = await response.text()\n      if (!text) return\n      const data = JSON.parse(text)\n\n      if (data.success) {\n        setLogs(data.logs || [])\n      } else {\n        toast.error(\"Erro ao carregar histórico\")\n      }\n    } catch (error) {\n      console.error(\"Erro ao carregar histórico:\", error)\n      toast.error(\"Erro ao carregar histórico\")\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  function getActionIcon(action: string) {\n    switch (action) {\n      case \"assigned\":\n        return <UserPlus className=\"w-4 h-4\" />\n      case \"transferred\":\n        return <ArrowRightLeft className=\"w-4 h-4\" />\n      case \"released\":\n        return <UserMinus className=\"w-4 h-4\" />\n      case \"completed\":\n        return <CheckCircle className=\"w-4 h-4\" />\n      default:\n        return null\n    }\n  }\n\n  function getActionText(log: AssignmentLog) {\n    switch (log.action) {\n      case \"assigned\":\n        return `Atribuído para ${log.to_user_name}`\n      case \"transferred\":\n        return `Transferido de ${log.from_user_name} para ${log.to_user_name}`\n      case \"released\":\n        return `Liberado por ${log.performed_by_name}`\n      case \"completed\":\n        return \"Conversa concluída\"\n      default:\n        return \"Ação desconhecida\"\n    }\n  }\n\n  function getActionColor(action: string) {\n    switch (action) {\n      case \"assigned\":\n        return \"bg-green-500/10 text-green-600\"\n      case \"transferred\":\n        return \"bg-blue-500/10 text-blue-600\"\n      case \"released\":\n        return \"bg-yellow-500/10 text-yellow-600\"\n      case \"completed\":\n        return \"bg-gray-500/10 text-gray-600\"\n      default:\n        return \"bg-gray-500/10 text-gray-600\"\n    }\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle>Histórico de Atribuições</DialogTitle>\n          <DialogDescription>{chatName}</DialogDescription>\n        </DialogHeader>\n\n        <ScrollArea className=\"max-h-[500px] pr-4\">\n          {loading ? (\n            <div className=\"flex items-center justify-center py-8\">\n              <Loader2 className=\"w-6 h-6 animate-spin text-muted-foreground\" />\n            </div>\n          ) : logs.length === 0 ? (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              <p>Nenhum registro de atribuição encontrado</p>\n            </div>\n          ) : (\n            <div className=\"relative\">\n              {/* Timeline line */}\n              <div className=\"absolute left-5 top-0 bottom-0 w-0.5 bg-border\" />\n\n              <div className=\"space-y-6\">\n                {logs.map((log, index) => (\n                  <div key={log.id} className=\"relative flex gap-4 group\">\n                    {/* Timeline dot */}\n                    <div\n                      className={`relative z-10 flex items-center justify-center w-10 h-10 rounded-full ${getActionColor(log.action)}`}\n                    >\n                      {getActionIcon(log.action)}\n                    </div>\n\n                    {/* Content */}\n                    <div className=\"flex-1 pb-6\">\n                      <div className=\"bg-card border rounded-lg p-4 shadow-sm group-hover:shadow-md transition-shadow\">\n                        <div className=\"flex items-start justify-between gap-2 mb-2\">\n                          <div className=\"flex-1\">\n                            <p className=\"font-medium text-sm\">{getActionText(log)}</p>\n                            {log.performed_by_name &&\n                              log.performed_by_id !== log.to_user_id &&\n                              log.action === \"transferred\" && (\n                                <p className=\"text-xs text-muted-foreground mt-1\">\n                                  Realizado por: {log.performed_by_name}\n                                </p>\n                              )}\n                          </div>\n                          <Badge variant=\"outline\" className=\"text-xs whitespace-nowrap\">\n                            {formatDistanceToNow(new Date(log.created_at), {\n                              addSuffix: true,\n                              locale: ptBR,\n                            })}\n                          </Badge>\n                        </div>\n\n                        {log.notes && (\n                          <div className=\"mt-2 p-2 bg-muted rounded text-sm\">\n                            <p className=\"text-muted-foreground\">{log.notes}</p>\n                          </div>\n                        )}\n\n                        <p className=\"text-xs text-muted-foreground mt-2\">\n                          {new Date(log.created_at).toLocaleString(\"pt-BR\", {\n                            dateStyle: \"long\",\n                            timeStyle: \"short\",\n                          })}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </ScrollArea>\n      </DialogContent>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2343, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/ui/select.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SelectPrimitive from '@radix-ui/react-select'\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  size = 'default',\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: 'sm' | 'default'\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = 'popper',\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md',\n          position === 'popper' &&\n            'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\n          className,\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            'p-1',\n            position === 'popper' &&\n              'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1',\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn('text-muted-foreground px-2 py-1.5 text-xs', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn('bg-border pointer-events-none -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AAAA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,6LAAC,6KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,EACrB,SAAS,EACT,OAAO,SAAS,EAChB,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,6LAAC,gLAAuB;QACtB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,qHAAE,EACX,gzBACA;QAED,GAAG,KAAK;;YAER;0BACD,6LAAC,6KAAoB;gBAAC,OAAO;0BAC3B,cAAA,6LAAC,8OAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;MAxBS;AA0BT,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,WAAW,QAAQ,EACnB,GAAG,OACkD;IACrD,qBACE,6LAAC,+KAAsB;kBACrB,cAAA,6LAAC,gLAAuB;YACtB,aAAU;YACV,WAAW,IAAA,qHAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,6LAAC;;;;;8BACD,6LAAC,iLAAwB;oBACvB,WAAW,IAAA,qHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,6LAAC;;;;;;;;;;;;;;;;AAIT;MAjCS;AAmCT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,6LAAC,8KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OAC+C;IAClD,qBACE,6LAAC,6KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,6aACA;QAED,GAAG,KAAK;;0BAET,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC,sLAA6B;8BAC5B,cAAA,6LAAC,wNAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGzB,6LAAC,iLAAwB;0BAAE;;;;;;;;;;;;AAGjC;MAtBS;AAwBT,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACoD;IACvD,qBACE,6LAAC,kLAAyB;QACxB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OACyD;IAC5D,qBACE,6LAAC,uLAA8B;QAC7B,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,wOAAa;YAAC,WAAU;;;;;;;;;;;AAG/B;MAhBS;AAkBT,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,6LAAC,yLAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,8OAAe;YAAC,WAAU;;;;;;;;;;;AAGjC;MAhBS","debugId":null}},
    {"offset": {"line": 2600, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/whatsapp/assign-to-user-dialog.tsx"],"sourcesContent":["\"use client\" // ⬅️ CORREÇÃO PRINCIPAL: Adicionado \"use client\"\n\nimport { useEffect, useState, useCallback } from \"react\" // Adicionado useCallback\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\"\nimport { Button } from \"@/components/ui/button\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { toast } from \"sonner\"\nimport { Loader2, UserMinus } from \"lucide-react\" \nimport { createClient } from \"@/lib/supabase/client\"\n\ninterface User {\n  id: string\n  nome: string\n}\n\n// ⚠️ Adicionando um tipo para a atribuição (baseado no seu 'assignmentData')\nexport interface ChatAssignment {\n  chatId: string\n  chatName: string\n  assignToId: string\n  assignToName: string\n  autoAssign: boolean\n}\n\nexport interface AssignToUserDialogProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  chatId: string\n  chatName: string\n  currentUserId: string | null\n  // ⬅️ [CORREÇÃO 1]: Adição da propriedade 'currentAssignment'\n  currentAssignment: ChatAssignment | null\n  onAssignSuccess?: () => void\n  onRelease?: (chatId: string) => Promise<void> // Adicionado para lidar com desatribuição\n}\n\nexport function AssignToUserDialog({\n  open,\n  onOpenChange,\n  chatId,\n  chatName,\n  currentUserId,\n  // ⬅️ [CORREÇÃO 2]: Adição de 'currentAssignment' no destructuring\n  currentAssignment,\n  onAssignSuccess,\n  onRelease,\n}: AssignToUserDialogProps) {\n  const [users, setUsers] = useState<User[]>([])\n  const [selectedUserId, setSelectedUserId] = useState<string>(\"\")\n  const [loading, setLoading] = useState(true)\n  const [assigning, setAssigning] = useState(false)\n  const [releasing, setReleasing] = useState(false) // Estado para desatribuição\n  const supabase = createClient()\n\n  const loadUsers = useCallback(async () => { // Usando useCallback para a função\n    try {\n      setLoading(true)\n      const { data, error } = await supabase.from(\"perfis\").select(\"id, nome\").order(\"nome\")\n\n      if (error) {\n        console.error(\"Erro ao carregar usuários:\", error)\n        throw error\n      }\n\n      setUsers(data || [])\n    } catch (error) {\n      console.error(\"Erro ao carregar usuários:\", error)\n      toast.error(\"Erro ao carregar usuários\")\n    } finally {\n      setLoading(false)\n    }\n  }, [supabase]) // Adicionado supabase como dependência para segurança\n\n  useEffect(() => {\n    if (open) {\n      loadUsers()\n      // Se já houver atribuição, pré-selecionar o usuário\n      if (currentAssignment) {\n        setSelectedUserId(currentAssignment.assignToId)\n      } else {\n        setSelectedUserId(\"\")\n      }\n    }\n  }, [open, currentAssignment, loadUsers]) // loadUsers adicionado nas dependências\n\n  // Função handleUsers foi substituída por loadUsers\n  // async function loadUsers() { ... }\n\n  async function handleAssignToUser() {\n    if (!selectedUserId) {\n      toast.error(\"Selecione um usuário\")\n      return\n    }\n\n    const selectedUser = users.find((u) => u.id === selectedUserId)\n    if (!selectedUser) {\n      toast.error(\"Usuário não encontrado\")\n      return\n    }\n\n    setAssigning(true)\n    try {\n      const assignmentData: ChatAssignment = { // Usando o tipo ChatAssignment\n        chatId,\n        chatName,\n        assignToId: selectedUserId,\n        assignToName: selectedUser.nome,\n        autoAssign: false,\n      }\n\n      const response = await fetch(\"/api/whatsapp/assignments\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(assignmentData),\n      })\n\n      if (!response.ok) {\n        const errorText = await response.text()\n        console.error(\"Erro na resposta:\", errorText)\n\n        try {\n          const errorData = JSON.parse(errorText)\n          toast.error(errorData.message || \"Erro ao atribuir conversa\")\n        } catch {\n          toast.error(`Erro ao atribuir conversa: ${response.status}`)\n        }\n        return\n      }\n\n      const text = await response.text()\n      if (!text) {\n        console.error(\"Resposta vazia do servidor\")\n        toast.error(\"Resposta vazia do servidor\")\n        return\n      }\n\n      const data = JSON.parse(text)\n      if (data.success) {\n        toast.success(`Conversa atribuída para ${selectedUser.nome}`)\n        onOpenChange(false)\n        onAssignSuccess?.()\n      } else {\n        console.error(\"Falha na atribuição:\", data.message)\n        toast.error(data.message || \"Erro ao atribuir conversa\")\n      }\n    } catch (error) {\n      console.error(\"Erro ao atribuir:\", error)\n      toast.error(error instanceof Error ? error.message : \"Erro ao atribuir conversa\")\n    } finally {\n      setAssigning(false)\n    }\n  }\n\n  // ⬅️ [MELHORIA]: Adicionando função para desatribuir a conversa\n  async function handleRelease() {\n    if (!onRelease) return\n    setReleasing(true)\n    try {\n      await onRelease(chatId)\n      toast.success(\"Conversa liberada com sucesso\")\n      onOpenChange(false)\n      onAssignSuccess?.() // Chama o sucesso para atualizar a lista/estado\n    } catch (error) {\n      console.error(\"Erro ao liberar conversa:\", error)\n      toast.error(\"Erro ao liberar conversa\")\n    } finally {\n      setReleasing(false)\n    }\n  }\n\n  const isAssignedToSelectedUser = currentAssignment?.assignToId === selectedUserId\n  const isAssigned = !!currentAssignment\n  const buttonDisabled = !selectedUserId || assigning || loading || isAssignedToSelectedUser\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Atribuir conversa</DialogTitle>\n          <DialogDescription>\n            {isAssigned \n              ? `Atualmente atribuída a: ${currentAssignment.assignToName}` \n              : \"Selecione um usuário para atribuir a conversa\"}\n          </DialogDescription>\n        </DialogHeader>\n\n        {loading ? (\n          <div className=\"flex items-center justify-center py-8\">\n            <Loader2 className=\"w-6 h-6 animate-spin text-muted-foreground\" />\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">Selecione um usuário</label>\n              <Select value={selectedUserId} onValueChange={setSelectedUserId}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Escolha um usuário...\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {users.map((user) => (\n                    <SelectItem \n                      key={user.id} \n                      value={user.id}\n                      disabled={isAssigned && currentAssignment?.assignToId === user.id} // Impede re-atribuição para o mesmo usuário\n                    >\n                      {user.nome}\n                      {currentAssignment?.assignToId === user.id ? \" (Atual)\" : \"\"}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        )}\n\n        <DialogFooter className=\"flex flex-col-reverse sm:flex-row sm:justify-between sm:space-x-2\">\n          {/* Botão de Liberar (apenas se estiver atribuído e a função for fornecida) */}\n          {isAssigned && onRelease && (\n            <Button \n              variant=\"destructive\" \n              onClick={handleRelease}\n              disabled={releasing}\n            >\n              {releasing ? <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" /> : <UserMinus className=\"w-4 h-4 mr-2\" />}\n              Liberar Conversa\n            </Button>\n          )}\n\n          <div className=\"flex space-x-2\">\n            <Button variant=\"outline\" onClick={() => onOpenChange(false)} disabled={assigning || releasing}>\n              Cancelar\n            </Button>\n            <Button \n              onClick={handleAssignToUser} \n              disabled={buttonDisabled}\n            >\n              {assigning ? <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" /> : null}\n              {isAssigned && !isAssignedToSelectedUser ? \"Reatribuir\" : \"Atribuir\"}\n            </Button>\n          </div>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2950, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/lib/role-colors.ts"],"sourcesContent":["import type React from \"react\"\n// Utility functions for role colors\n\nexport function getRoleColor(cargo: string): string {\n  // Default colors for built-in roles (fallback)\n  const defaultColors: Record<string, string> = {\n    Administrador: \"#ef4444\",\n    Desenvolvedor: \"#a855f7\",\n    Vendedor: \"#3b82f6\",\n    Financeiro: \"#22c55e\",\n  }\n\n  return defaultColors[cargo] || \"#71717a\"\n}\n\nexport function getRoleColorWithOpacity(cargo: string, opacity = 0.2): string {\n  const color = getRoleColor(cargo)\n  return (\n    color +\n    Math.round(opacity * 255)\n      .toString(16)\n      .padStart(2, \"0\")\n  )\n}\n\nexport async function getRoleColorFromDB(cargo: string): Promise<string> {\n  try {\n    const { createClient } = await import(\"@/lib/supabase/client\")\n    const supabase = createClient()\n\n    const { data, error } = await supabase.from(\"cargos\").select(\"cor\").eq(\"nome\", cargo).single()\n\n    if (error || !data?.cor) {\n      // Fallback to default colors\n      return getRoleColor(cargo)\n    }\n\n    return data.cor\n  } catch (error) {\n    console.error(\"[v0] Error fetching role color from DB:\", error)\n    return getRoleColor(cargo)\n  }\n}\n\nexport function getBadgeClasses(cargo: string, customColor?: string): string {\n  const color = customColor || getRoleColor(cargo)\n\n  // We'll use inline styles for custom colors\n  return \"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border\"\n}\n\nexport function getBadgeStyles(cargo: string, customColor?: string): React.CSSProperties {\n  const color = customColor || getRoleColor(cargo)\n\n  return {\n    backgroundColor: color + \"33\", // 20% opacity\n    borderColor: color,\n    color: color,\n  }\n}\n\n// Check if a color is light or dark to determine text color\nexport function isColorLight(hexColor: string): boolean {\n  const hex = hexColor.replace(\"#\", \"\")\n  const r = Number.parseInt(hex.substr(0, 2), 16)\n  const g = Number.parseInt(hex.substr(2, 2), 16)\n  const b = Number.parseInt(hex.substr(4, 2), 16)\n\n  // Calculate relative luminance\n  const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255\n\n  return luminance > 0.5\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAGO,SAAS,aAAa,KAAa;IACxC,+CAA+C;IAC/C,MAAM,gBAAwC;QAC5C,eAAe;QACf,eAAe;QACf,UAAU;QACV,YAAY;IACd;IAEA,OAAO,aAAa,CAAC,MAAM,IAAI;AACjC;AAEO,SAAS,wBAAwB,KAAa,EAAE,UAAU,GAAG;IAClE,MAAM,QAAQ,aAAa;IAC3B,OACE,QACA,KAAK,KAAK,CAAC,UAAU,KAClB,QAAQ,CAAC,IACT,QAAQ,CAAC,GAAG;AAEnB;AAEO,eAAe,mBAAmB,KAAa;IACpD,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG;QACzB,MAAM,WAAW;QAEjB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU,MAAM,CAAC,OAAO,EAAE,CAAC,QAAQ,OAAO,MAAM;QAE5F,IAAI,SAAS,CAAC,MAAM,KAAK;YACvB,6BAA6B;YAC7B,OAAO,aAAa;QACtB;QAEA,OAAO,KAAK,GAAG;IACjB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2CAA2C;QACzD,OAAO,aAAa;IACtB;AACF;AAEO,SAAS,gBAAgB,KAAa,EAAE,WAAoB;IACjE,MAAM,QAAQ,eAAe,aAAa;IAE1C,4CAA4C;IAC5C,OAAO;AACT;AAEO,SAAS,eAAe,KAAa,EAAE,WAAoB;IAChE,MAAM,QAAQ,eAAe,aAAa;IAE1C,OAAO;QACL,iBAAiB,QAAQ;QACzB,aAAa;QACb,OAAO;IACT;AACF;AAGO,SAAS,aAAa,QAAgB;IAC3C,MAAM,MAAM,SAAS,OAAO,CAAC,KAAK;IAClC,MAAM,IAAI,OAAO,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG,IAAI;IAC5C,MAAM,IAAI,OAAO,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG,IAAI;IAC5C,MAAM,IAAI,OAAO,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG,IAAI;IAE5C,+BAA+B;IAC/B,MAAM,YAAY,CAAC,QAAQ,IAAI,QAAQ,IAAI,QAAQ,CAAC,IAAI;IAExD,OAAO,YAAY;AACrB","debugId":null}},
    {"offset": {"line": 3022, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/hooks/use-realtime-subscription.ts"],"sourcesContent":["\"use client\"\n\nimport { useEffect } from \"react\"\nimport { createClient } from \"@/lib/supabase/client\"\nimport type { RealtimePostgresChangesPayload } from \"@supabase/supabase-js\"\n\ntype EventType = \"INSERT\" | \"UPDATE\" | \"DELETE\" | \"*\"\n\ninterface UseRealtimeSubscriptionOptions<T> {\n  table: string\n  onInsert?: (payload: T) => void\n  onUpdate?: (payload: T) => void\n  onDelete?: (payload: T) => void\n  filter?: string\n  enabled?: boolean\n}\n\nexport function useRealtimeSubscription<T = any>(options: UseRealtimeSubscriptionOptions<T>) {\n  const { table, onInsert, onUpdate, onDelete, filter, enabled = true } = options\n\n  useEffect(() => {\n    if (!enabled) return\n\n    const supabase = createClient()\n\n    const channelName = `${table}-changes-${filter || \"all\"}`\n\n    const channel = supabase\n      .channel(channelName)\n      .on(\n        \"postgres_changes\" as any,\n        {\n          event: \"*\" as any,\n          schema: \"public\",\n          table: table,\n          filter: filter,\n        },\n        (payload: RealtimePostgresChangesPayload<T>) => {\n          if (payload.eventType === \"INSERT\" && onInsert) {\n            onInsert(payload.new as T)\n          }\n          if (payload.eventType === \"UPDATE\" && onUpdate) {\n            onUpdate(payload.new as T)\n          }\n          if (payload.eventType === \"DELETE\" && onDelete) {\n            onDelete(payload.old as T)\n          }\n        },\n      )\n      .subscribe((status, err) => {\n        if (status === \"CHANNEL_ERROR\" || status === \"TIMED_OUT\") {\n          console.error(`[Realtime] Erro em ${table}:`, err?.message || status)\n        }\n      })\n\n    return () => {\n      supabase.removeChannel(channel)\n    }\n  }, [table, onInsert, onUpdate, onDelete, filter, enabled])\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;AAHA;;;AAiBO,SAAS,wBAAiC,OAA0C;;IACzF,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAE,UAAU,IAAI,EAAE,GAAG;IAExE,IAAA,0KAAS;6CAAC;YACR,IAAI,CAAC,SAAS;YAEd,MAAM,WAAW,IAAA,4IAAY;YAE7B,MAAM,cAAc,GAAG,MAAM,SAAS,EAAE,UAAU,OAAO;YAEzD,MAAM,UAAU,SACb,OAAO,CAAC,aACR,EAAE,CACD,oBACA;gBACE,OAAO;gBACP,QAAQ;gBACR,OAAO;gBACP,QAAQ;YACV;6DACA,CAAC;oBACC,IAAI,QAAQ,SAAS,KAAK,YAAY,UAAU;wBAC9C,SAAS,QAAQ,GAAG;oBACtB;oBACA,IAAI,QAAQ,SAAS,KAAK,YAAY,UAAU;wBAC9C,SAAS,QAAQ,GAAG;oBACtB;oBACA,IAAI,QAAQ,SAAS,KAAK,YAAY,UAAU;wBAC9C,SAAS,QAAQ,GAAG;oBACtB;gBACF;4DAED,SAAS;6DAAC,CAAC,QAAQ;oBAClB,IAAI,WAAW,mBAAmB,WAAW,aAAa;wBACxD,QAAQ,KAAK,CAAC,CAAC,mBAAmB,EAAE,MAAM,CAAC,CAAC,EAAE,KAAK,WAAW;oBAChE;gBACF;;YAEF;qDAAO;oBACL,SAAS,aAAa,CAAC;gBACzB;;QACF;4CAAG;QAAC;QAAO;QAAU;QAAU;QAAU;QAAQ;KAAQ;AAC3D;GA1CgB","debugId":null}},
    {"offset": {"line": 3087, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/whatsapp/chat-window.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useEffect, useRef, useCallback } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Send, RefreshCw, Zap, Loader2, Paperclip, X, User, History, UserPlus } from \"lucide-react\"\nimport { QuickRepliesPanel } from \"./quick-replies-panel\"\nimport { Sheet, SheetContent, SheetDescription, SheetHeader, SheetTitle } from \"@/components/ui/sheet\"\nimport { MessageBubble } from \"./message-bubble\"\nimport { toast } from \"sonner\"\nimport type { Message, ChatAssignmentDB, ChatActivity } from \"@/lib/whatsapp-types\"\nimport { useWhatsAppCache } from \"@/contexts/whatsapp-cache-context\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { AssignmentHistoryDialog } from \"./assignment-history-dialog\"\nimport { AssignToUserDialog } from \"./assign-to-user-dialog\"\nimport { getCookie } from \"@/lib/auth\"\nimport { createClient } from \"@/lib/supabase/client\"\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\"\nimport { getRoleColor } from \"@/lib/role-colors\"\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\"\nimport { useRealtimeSubscription } from \"@/hooks/use-realtime-subscription\"\n\nconst MESSAGES_PER_PAGE = 10\nconst SCROLL_THRESHOLD = 100\n\ninterface ChatWindowProps {\n  chatId: string\n  chatName?: string | null\n  chatPicture?: string | null\n  onRefresh: () => void\n  onToggleLeadPanel: (show: boolean) => void\n  showLeadPanel: boolean\n}\n\nexport function ChatWindow({\n  chatId,\n  chatName,\n  chatPicture = null,\n  onRefresh,\n  onToggleLeadPanel,\n  showLeadPanel,\n}: ChatWindowProps) {\n  const { getCachedMessages, setCachedMessages, appendMessages, addNewMessage, invalidateMessagesCache } =\n    useWhatsAppCache()\n\n  console.log(\"chatPicture recebido:\", chatPicture)\n\n  const [messages, setMessages] = useState<Message[]>([])\n  const [newMessage, setNewMessage] = useState(\"\")\n  const [loading, setLoading] = useState(true)\n  const [sending, setSending] = useState(false)\n  const scrollRef = useRef<HTMLDivElement>(null)\n  const [quickRepliesOpen, setQuickRepliesOpen] = useState(false)\n  const [assignment, setAssignment] = useState<ChatAssignmentDB | null>(null)\n  const [assignedUserName, setAssignedUserName] = useState<string | null>(null)\n  const [assignedUserCargo, setAssignedUserCargo] = useState<string | null>(null)\n  const [activities, setActivities] = useState<ChatActivity[]>([])\n  const [showHistoryDialog, setShowHistoryDialog] = useState(false)\n  const [hasAssignmentHistory, setHasAssignmentHistory] = useState(false)\n  const [showAssignToUserDialog, setShowAssignToUserDialog] = useState(false)\n  const [roleColor, setRoleColor] = useState<string | null>(null)\n  const userDataCache = useRef<Record<string, { nome: string | null; cargo: string | null; color: string | null }>>({})\n\n  const userId = getCookie(\"auth_user_id\")\n\n  const scrollContainerRef = useRef<HTMLDivElement>(null)\n  const isLoadingRef = useRef(false)\n  const previousScrollHeightRef = useRef(0)\n  const previousScrollTopRef = useRef(0)\n  const isInitialLoadRef = useRef(true)\n  const [hasMore, setHasMore] = useState(false)\n  const [offset, setOffset] = useState(0)\n  const [loadingMore, setLoadingMore] = useState(false)\n  const [selectedFile, setSelectedFile] = useState<File | null>(null)\n  const fileInputRef = useRef<HTMLInputElement>(null)\n\n  // Fallback seguro para nome do chat\n  const safeChatName =\n    chatName && chatName.trim().length > 0\n      ? chatName\n      : chatId && chatId.trim().length > 0\n        ? chatId\n        : \"Contato\"\n\n  // ----------------------------------------------------\n  // --- REALTIME SUBSCRIPTIONS (Atividades e Atribuição)\n  // ----------------------------------------------------\n\n  useRealtimeSubscription({\n    table: \"chat_activity\",\n    filter: `chat_id=eq.${chatId}`,\n    onInsert: (activity: any) => {\n      setActivities((prev) => {\n        const exists = prev.some((a) => a.user_id === activity.user_id)\n        if (exists) {\n          return prev.map((a) => (a.user_id === activity.user_id ? activity : a))\n        }\n        return [...prev, activity]\n      })\n    },\n    onUpdate: (activity: any) => {\n      setActivities((prev) => prev.map((a) => (a.user_id === activity.user_id ? activity : a)))\n    },\n    onDelete: (activity: any) => {\n      setActivities((prev) => prev.filter((a) => a.user_id !== activity.user_id))\n    },\n  })\n\n  useRealtimeSubscription({\n    table: \"chat_assignments\",\n    filter: `chat_id=eq.${chatId}`,\n    onInsert: async (assignment: any) => {\n      if (assignment.status === \"active\") {\n        setAssignment(assignment)\n\n        if (assignment.assigned_to_name && assignment.assigned_to_id) {\n          const cachedData = userDataCache.current[assignment.assigned_to_id]\n\n          if (cachedData) {\n            setAssignedUserName(cachedData.nome)\n            setAssignedUserCargo(cachedData.cargo)\n            setRoleColor(cachedData.color)\n          } else {\n            const userData = await loadAssignmentUserData(assignment.assigned_to_id)\n            userDataCache.current[assignment.assigned_to_id] = userData\n            setAssignedUserName(userData.nome)\n            setAssignedUserCargo(userData.cargo)\n            setRoleColor(userData.color)\n          }\n        }\n      }\n    },\n    onUpdate: async (assignment: any) => {\n      if (assignment.status === \"active\") {\n        setAssignment(assignment)\n\n        const cachedData = userDataCache.current[assignment.assigned_to_id]\n\n        if (cachedData) {\n          setAssignedUserName(cachedData.nome)\n          setAssignedUserCargo(cachedData.cargo)\n          setRoleColor(cachedData.color)\n        } else if (assignment.assigned_to_id) {\n          const userData = await loadAssignmentUserData(assignment.assigned_to_id)\n\n          userDataCache.current[assignment.assigned_to_id] = userData\n          setAssignedUserName(userData.nome)\n          setAssignedUserCargo(userData.cargo)\n          setRoleColor(userData.color)\n        }\n      }\n    },\n    onDelete: (assignment: any) => {\n      setAssignment(null)\n      setAssignedUserName(null)\n      setAssignedUserCargo(null)\n      setRoleColor(null)\n    },\n  })\n\n  // ----------------------------------------------------\n  // --- LIFECYCLE & INITIAL LOAD\n  // ----------------------------------------------------\n\n  useEffect(() => {\n    loadAssignment()\n    loadActivities()\n    checkAssignmentHistory()\n    registerActivity(\"viewing\")\n  }, [chatId])\n\n  useEffect(() => {\n    const cachedData = getCachedMessages(chatId)\n\n    if (cachedData) {\n      setMessages(cachedData.messages)\n      setHasMore(cachedData.hasMore)\n      setOffset(cachedData.totalMessages)\n      setLoading(false)\n      isInitialLoadRef.current = true\n      return\n    }\n\n    setMessages([])\n    setOffset(0)\n    setHasMore(true)\n    setLoading(true)\n    isInitialLoadRef.current = true\n    isLoadingRef.current = false\n\n    loadMessages(0, true)\n  }, [chatId, getCachedMessages])\n\n  useEffect(() => {\n    if (isInitialLoadRef.current && messages.length > 0 && !loading) {\n      setTimeout(() => {\n        scrollToBottom(\"auto\")\n        isInitialLoadRef.current = false\n      }, 100)\n    }\n  }, [messages, loading])\n\n  useEffect(() => {\n    if (!loading && !isLoadingRef.current && previousScrollHeightRef.current > 0 && scrollContainerRef.current) {\n      const newScrollHeight = scrollContainerRef.current.scrollHeight\n      const heightDifference = newScrollHeight - previousScrollHeightRef.current\n\n      scrollContainerRef.current.scrollTop = previousScrollTopRef.current + heightDifference\n\n      previousScrollHeightRef.current = 0\n      previousScrollTopRef.current = 0\n    }\n  }, [messages, loading])\n\n  // ----------------------------------------------------\n  // --- DATA LOADING & CACHING\n  // ----------------------------------------------------\n\n  async function loadAssignmentUserData(userId: string) {\n    try {\n      const supabase = createClient()\n      const { data: perfilData, error: perfilError } = await supabase\n        .from(\"perfis\")\n        .select(\"nome, cargo\")\n        .eq(\"id\", userId)\n        .single()\n\n      if (perfilError) {\n        return { nome: null, cargo: null, color: null }\n      }\n\n      if (perfilData?.cargo) {\n        const { data: cargoData } = await supabase\n          .from(\"cargos\")\n          .select(\"cor\")\n          .eq(\"nome\", perfilData.cargo)\n          .maybeSingle()\n\n        const color = cargoData?.cor || getRoleColor(perfilData.cargo)\n\n        return {\n          nome: perfilData.nome || null,\n          cargo: perfilData.cargo || null,\n          color: color,\n        }\n      }\n\n      return { nome: perfilData?.nome || null, cargo: perfilData?.cargo || null, color: null }\n    } catch (error) {\n      console.error(\"Erro ao buscar dados do usuário:\", error)\n      return { nome: null, cargo: null, color: null }\n    }\n  }\n\n  async function loadAssignment() {\n    try {\n      const response = await fetch(`/api/whatsapp/assignments?chatId=${chatId}`)\n      if (!response.ok) {\n        console.error(\"[API] Erro ao buscar atribuição:\", response.status)\n        setAssignment(null)\n        setAssignedUserName(null)\n        setAssignedUserCargo(null)\n        setRoleColor(null)\n        return\n      }\n\n      const text = await response.text()\n      if (!text) {\n        setAssignment(null)\n        setAssignedUserName(null)\n        setAssignedUserCargo(null)\n        setRoleColor(null)\n        return\n      }\n\n      try {\n        const data = JSON.parse(text)\n\n        if (data.success && data.assignment && data.assignment.assigned_to_id) {\n          setAssignment(data.assignment)\n\n          const cachedData = userDataCache.current[data.assignment.assigned_to_id]\n          if (cachedData) {\n            setAssignedUserName(cachedData.nome)\n            setAssignedUserCargo(cachedData.cargo)\n            setRoleColor(cachedData.color)\n          } else {\n            const userData = await loadAssignmentUserData(data.assignment.assigned_to_id)\n            userDataCache.current[data.assignment.assigned_to_id] = userData\n            setAssignedUserName(userData.nome)\n            setAssignedUserCargo(userData.cargo)\n            setRoleColor(userData.color)\n          }\n        } else {\n          setAssignment(null)\n          setAssignedUserName(null)\n          setAssignedUserCargo(null)\n          setRoleColor(null)\n        }\n      } catch {\n        return\n      }\n    } catch (error) {\n      console.error(\"[v0] Erro ao carregar atribuição:\", error)\n      setAssignment(null)\n      setAssignedUserName(null)\n      setAssignedUserCargo(null)\n      setRoleColor(null)\n    }\n  }\n\n  async function loadActivities() {\n    try {\n      const response = await fetch(`/api/whatsapp/activity?chatId=${chatId}`)\n      if (!response.ok) {\n        if (response.status !== 429 && response.status !== 500) {\n          console.error(\"[API] Erro ao buscar atividades:\", response.status)\n        }\n        return\n      }\n\n      const text = await response.text()\n      if (!text) return\n\n      try {\n        const data = JSON.parse(text)\n        if (data.success) {\n          setActivities(data.activities || [])\n        }\n      } catch {\n        return\n      }\n    } catch (error) {\n      if (error instanceof TypeError && !error.message.includes(\"Failed to fetch\")) {\n        console.error(\"[v0] Erro ao buscar atividades:\", error)\n      }\n    }\n  }\n\n  async function loadMessages(currentOffset: number, isInitial = false) {\n    if (isLoadingRef.current) {\n      return\n    }\n\n    isLoadingRef.current = true\n\n    if (!isInitial && scrollContainerRef.current) {\n      previousScrollHeightRef.current = scrollContainerRef.current.scrollHeight\n      previousScrollTopRef.current = scrollContainerRef.current.scrollTop\n    }\n\n    try {\n      if (isInitial) {\n        setLoading(true)\n      } else {\n        setLoadingMore(true)\n      }\n\n      const url = `/api/whatsapp/messages/${chatId}?limit=${MESSAGES_PER_PAGE}&offset=${currentOffset}`\n\n      const response = await fetch(url)\n      const data = await response.json()\n\n      if (data.success) {\n        const normalizedMessages = (data.messages || []).map((msg: any) => ({\n          id: msg.id,\n          body: msg.text || msg.body || \"\",\n          timestamp: msg.timestamp,\n          from: msg.senderName || msg.from || \"Desconhecido\",\n          to: msg.to || chatId,\n          fromMe: msg.fromMe || false,\n          type: msg.type || \"text\",\n          hasMedia: msg.hasMedia || false,\n          ack: msg.ack || 0,\n          mediaUrl: msg.mediaUrl || null,\n          mimeType: msg.mimeType || null,\n          caption: msg.caption || null,\n        }))\n\n        if (isInitial) {\n          setMessages(normalizedMessages)\n          setCachedMessages(chatId, normalizedMessages, data.hasMore || false, normalizedMessages.length)\n        } else {\n          setMessages((prev) => [...normalizedMessages, ...prev])\n          appendMessages(chatId, normalizedMessages, data.hasMore || false)\n        }\n\n        setHasMore(data.hasMore || false)\n        setOffset(currentOffset + normalizedMessages.length)\n\n        console.log(\n          \"[v0] Mensagens carregadas:\",\n          normalizedMessages.length,\n          \"| Total:\",\n          currentOffset + normalizedMessages.length,\n          \"| Tem mais:\",\n          data.hasMore || false,\n        )\n      } else {\n        toast.error(data.message || \"Erro ao carregar mensagens\")\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : \"Erro desconhecido\"\n      console.error(\"[v0] Erro ao carregar mensagens:\", errorMessage)\n      toast.error(\"Não foi possível conectar ao servidor. Verifique a configuração da API.\")\n    } finally {\n      setLoading(false)\n      setLoadingMore(false)\n      isLoadingRef.current = false\n    }\n  }\n\n  async function checkAssignmentHistory() {\n    try {\n      const response = await fetch(`/api/whatsapp/assignment-logs?chatId=${chatId}`)\n      if (!response.ok) {\n        console.error(\"[API] Erro ao buscar logs:\", response.status)\n        return\n      }\n      const text = await response.text()\n      if (!text) return\n      const data = JSON.parse(text)\n\n      if (data.success) {\n        setHasAssignmentHistory((data.logs || []).length > 0)\n      }\n    } catch (error) {\n      console.error(\"[v0] Erro ao verificar histórico:\", error)\n    }\n  }\n\n  // ----------------------------------------------------\n  // --- UI & USER INTERACTION HANDLERS\n  // ----------------------------------------------------\n\n  const handleScroll = useCallback(\n    (e: React.UIEvent<HTMLDivElement>) => {\n      const target = e.currentTarget\n      const scrollTop = target.scrollTop\n\n      if (scrollTop < SCROLL_THRESHOLD && hasMore && !isLoadingRef.current && !isInitialLoadRef.current) {\n        loadMessages(offset, false)\n      }\n    },\n    [offset, hasMore],\n  )\n\n  async function registerActivity(type: \"viewing\" | \"typing\") {\n    try {\n      await fetch(\"/api/whatsapp/activity\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          chatId,\n          activityType: type,\n        }),\n      })\n    } catch (error) {\n      console.error(\"[v0] Erro ao registrar atividade:\", error)\n    }\n  }\n\n  async function handleAssignToMe() {\n    try {\n      const response = await fetch(\"/api/whatsapp/assignments\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          chatId,\n          chatName: safeChatName,\n          assignToId: getCookie(\"auth_user_id\"),\n          assignToName: decodeURIComponent(getCookie(\"auth_user_name\") || \"\"),\n          autoAssign: false,\n        }),\n      })\n\n      if (!response.ok) {\n        toast.error(\"Erro ao atribuir conversa\")\n        return\n      }\n      const text = await response.text()\n      if (!text) {\n        toast.error(\"Resposta vazia do servidor\")\n        return\n      }\n\n      const data = JSON.parse(text)\n\n      if (data.success) {\n        setAssignment(data.assignment)\n        if (data.assignment.assigned_to_id) {\n          const cachedData = userDataCache.current[data.assignment.assigned_to_id]\n          if (cachedData) {\n            setAssignedUserName(cachedData.nome)\n            setAssignedUserCargo(cachedData.cargo)\n            setRoleColor(cachedData.color)\n          } else {\n            const userData = await loadAssignmentUserData(data.assignment.assigned_to_id)\n            userDataCache.current[data.assignment.assigned_to_id] = userData\n            setAssignedUserName(userData.nome)\n            setAssignedUserCargo(userData.cargo)\n            setRoleColor(userData.color)\n          }\n        }\n        toast.success(\"Conversa atribuída para você\")\n        checkAssignmentHistory()\n      } else {\n        toast.error(data.message || \"Erro ao atribuir conversa\")\n      }\n    } catch (error) {\n      console.error(\"[v0] Erro ao atribuir conversa:\", error)\n      toast.error(\"Erro ao atribuir conversa\")\n    }\n  }\n\n  async function handleReleaseChat() {\n    try {\n      const response = await fetch(`/api/whatsapp/assignments?chatId=${chatId}`, {\n        method: \"DELETE\",\n      })\n\n      if (!response.ok) {\n        toast.error(\"Erro ao liberar conversa\")\n        return\n      }\n      const text = await response.text()\n      if (!text) {\n        toast.error(\"Resposta vazia do servidor\")\n        return\n      }\n      const data = JSON.parse(text)\n\n      if (data.success) {\n        setAssignment(null)\n        setAssignedUserName(null)\n        setAssignedUserCargo(null)\n        setRoleColor(null)\n        toast.success(\"Conversa liberada\")\n        setShowAssignToUserDialog(false)\n        checkAssignmentHistory()\n      } else {\n        toast.error(data.message || \"Erro ao liberar conversa\")\n      }\n    } catch (error) {\n      console.error(\"[v0] Erro ao liberar conversa:\", error)\n      toast.error(\"Erro ao liberar conversa\")\n    }\n  }\n\n  function handleFileSelect(e: React.ChangeEvent<HTMLInputElement>) {\n    const file = e.target.files?.[0]\n    if (file) {\n      if (file.size > 16 * 1024 * 1024) {\n        toast.error(\"Arquivo muito grande. Máximo 16MB.\")\n        return\n      }\n      setSelectedFile(file)\n    }\n  }\n\n  function removeSelectedFile() {\n    setSelectedFile(null)\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\"\n    }\n  }\n\n  async function handleSendMessage() {\n    if ((!newMessage.trim() && !selectedFile) || sending) return\n\n    if (assignment && assignment.assigned_to_id !== getCookie(\"auth_user_id\")) {\n      toast.error(`Esta conversa está sendo atendida por ${assignment.assigned_to_name}`)\n      return\n    }\n\n    // Auto-atribuição se não houver atribuição ativa\n    if (!assignment && getCookie(\"auth_user_id\") && getCookie(\"auth_user_name\")) {\n      await fetch(\"/api/whatsapp/assignments\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          chatId,\n          chatName: safeChatName,\n          assignToId: getCookie(\"auth_user_id\"),\n          assignToName: decodeURIComponent(getCookie(\"auth_user_name\") || \"\"),\n          autoAssign: true,\n        }),\n      })\n      loadAssignment()\n    }\n\n    setSending(true)\n\n    try {\n      if (selectedFile) {\n        // Envio de Mídia\n        const formData = new FormData()\n        formData.append(\"chatId\", chatId)\n        formData.append(\"file\", selectedFile)\n\n        if (newMessage.trim()) {\n          formData.append(\"caption\", newMessage.trim())\n        }\n\n        const response = await fetch(\"/api/whatsapp/send-media\", {\n          method: \"POST\",\n          body: formData,\n        })\n\n        const data = await response.json()\n\n        if (data.success) {\n          await fetch(\"/api/whatsapp/track-message\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({\n              messageId: data.messageId || `temp-${Date.now()}`,\n              chatId,\n              messageBody: newMessage.trim() || null,\n              messageType: \"media\",\n            }),\n          })\n\n          const newMsgBody = newMessage.trim()\n          setNewMessage(\"\")\n          setSelectedFile(null)\n          if (fileInputRef.current) {\n            fileInputRef.current.value = \"\"\n          }\n          toast.success(\"Mídia enviada\")\n\n          const newMsg: Message = {\n            id: `temp-${Date.now()}`,\n            body: newMsgBody || \"\",\n            timestamp: Date.now(),\n            from: \"Você\",\n            to: chatId,\n            fromMe: true,\n            type: \"media\",\n            hasMedia: true,\n            ack: 1,\n            mediaUrl: null,\n            mimeType: selectedFile.type,\n            caption: newMsgBody || null,\n          }\n          setMessages((prev) => [...prev, newMsg])\n          addNewMessage(chatId, newMsg)\n\n          setTimeout(() => scrollToBottom(\"smooth\"), 100)\n        } else {\n          toast.error(data.message || \"Erro ao enviar mídia\")\n        }\n      } else {\n        // Envio de Texto\n        const response = await fetch(\"/api/whatsapp/send\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            chatId: chatId,\n            message: newMessage.trim(),\n          }),\n        })\n\n        const data = await response.json()\n\n        if (data.success) {\n          await fetch(\"/api/whatsapp/track-message\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({\n              messageId: data.messageId || `temp-${Date.now()}`,\n              chatId,\n              messageBody: newMessage.trim(),\n              messageType: \"text\",\n            }),\n          })\n\n          const messageSent = newMessage.trim()\n\n          setNewMessage(\"\")\n          toast.success(\"Mensagem enviada\")\n\n          const newMsg: Message = {\n            id: `temp-${Date.now()}`,\n            body: messageSent,\n            timestamp: Date.now(),\n            from: \"Você\",\n            to: chatId,\n            fromMe: true,\n            type: \"text\",\n            hasMedia: false,\n            ack: 1,\n            mediaUrl: null,\n            mimeType: null,\n            caption: null,\n          }\n          setMessages((prev) => [...prev, newMsg])\n          addNewMessage(chatId, newMsg)\n\n          setTimeout(() => scrollToBottom(\"smooth\"), 100)\n        } else {\n          toast.error(data.message || \"Erro ao enviar mensagem\")\n        }\n      }\n    } catch (error) {\n      console.error(\"[v0] ❌ Erro ao enviar mensagem:\", error)\n      toast.error(\"Não foi possível enviar a mensagem. Verifique a conexão com o servidor.\")\n    } finally {\n      setSending(false)\n    }\n  }\n\n  function scrollToBottom(behavior: ScrollBehavior = \"smooth\") {\n    if (scrollContainerRef.current) {\n      scrollContainerRef.current.scrollTo({\n        top: scrollContainerRef.current.scrollHeight,\n        behavior: behavior,\n      })\n    }\n  }\n\n  function handleKeyPress(e: React.KeyboardEvent) {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault()\n      handleSendMessage()\n    }\n  }\n\n  function handleMessageChange(value: string) {\n    setNewMessage(value)\n\n    if (value.trim()) {\n      registerActivity(\"typing\")\n    }\n  }\n\n  function handleQuickReply(message: string) {\n    setNewMessage(message)\n    setQuickRepliesOpen(false)\n  }\n\n  const assignmentForDialog = assignment\n    ? {\n        chatId: chatId,\n        chatName: safeChatName,\n        assignToId: assignment.assigned_to_id,\n        assignToName: assignment.assigned_to_name,\n        autoAssign: false,\n        ...assignment,\n      }\n    : null\n\n  // ----------------------------------------------------\n  // --- RENDER\n  // ----------------------------------------------------\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <Loader2 className=\"w-6 h-6 animate-spin text-muted-foreground\" />\n      </div>\n    )\n  }\n\n  const viewingUsers = activities.filter((a) => a.activity_type === \"viewing\")\n  const typingUsers = activities.filter((a) => a.activity_type === \"typing\")\n\n  return (\n    <div className=\"flex flex-col h-full bg-white relative\">\n      <div className=\"border-b p-4 flex-shrink-0\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n            <Avatar className=\"w-10 h-10 flex-shrink-0\">\n              {chatPicture && <AvatarImage src={chatPicture} alt={safeChatName} />}\n              <AvatarFallback className=\"bg-primary text-primary-foreground\">\n                {safeChatName.charAt(0).toUpperCase()}\n              </AvatarFallback>\n            </Avatar>\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex items-center gap-2\">\n                <h3 className=\"font-semibold truncate\">{safeChatName}</h3>\n                {assignedUserName && roleColor && (\n                  <Badge\n                    variant=\"secondary\"\n                    className=\"text-xs flex items-center gap-1 border-2\"\n                    style={{\n                      backgroundColor: roleColor,\n                      color: \"#ffffff\",\n                      borderColor: roleColor,\n                    }}\n                  >\n                    <User className=\"w-3 h-3\" />\n                    {assignedUserName}\n                  </Badge>\n                )}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <TooltipProvider delayDuration={200}>\n              {hasAssignmentHistory && (\n                <Tooltip>\n                  <TooltipTrigger asChild>\n                    <Button variant=\"outline\" size=\"sm\" onClick={() => setShowHistoryDialog(true)}>\n                      <History className=\"w-4 h-4\" />\n                    </Button>\n                  </TooltipTrigger>\n                  <TooltipContent side=\"bottom\">\n                    <p>Histórico</p>\n                  </TooltipContent>\n                </Tooltip>\n              )}\n\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button variant=\"outline\" size=\"sm\" onClick={() => setShowAssignToUserDialog(true)}>\n                    <User className=\"w-4 h-4 mr-2\" />\n                    Atribuir\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent side=\"bottom\">\n                  <p>Atribuir conversa</p>\n                </TooltipContent>\n              </Tooltip>\n\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button variant=\"outline\" size=\"sm\" onClick={() => onToggleLeadPanel(!showLeadPanel)}>\n                    <UserPlus className=\"w-4 h-4 mr-2\" />\n                    Novo Lead\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent side=\"bottom\">\n                  <p>Criar lead desta conversa</p>\n                </TooltipContent>\n              </Tooltip>\n\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button variant=\"outline\" size=\"sm\" onClick={onRefresh}>\n                    <RefreshCw className=\"w-4 h-4\" />\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent side=\"bottom\">\n                  <p>Atualizar</p>\n                </TooltipContent>\n              </Tooltip>\n            </TooltipProvider>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex-1 flex overflow-hidden\">\n        <div className=\"flex flex-col w-full\">\n          <div\n            ref={scrollContainerRef}\n            onScroll={handleScroll}\n            className=\"flex-1 overflow-y-auto p-4 space-y-4\"\n            style={{\n              overscrollBehavior: \"contain\",\n              WebkitOverflowScrolling: \"touch\",\n            }}\n          >\n            {loadingMore && (\n              <div className=\"flex items-center justify-center gap-2 py-4\">\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n                <p className=\"text-sm text-muted-foreground\">Carregando mensagens antigas...</p>\n              </div>\n            )}\n\n            {!hasMore && messages.length > 0 && (\n              <div className=\"text-center py-4\">\n                <p className=\"text-xs text-muted-foreground\">Início da conversa</p>\n              </div>\n            )}\n            <div className=\"space-y-3\">\n              {messages.length === 0 ? (\n                <div className=\"flex items-center justify-center h-full\">\n                  <p className=\"text-muted-foreground\">Nenhuma mensagem ainda</p>\n                </div>\n              ) : (\n                messages.map((message) => <MessageBubble key={message.id} message={message} />)\n              )}\n              <div ref={scrollRef} />\n            </div>\n          </div>\n\n          <div className=\"border-t p-4 flex-shrink-0 bg-white\">\n            {selectedFile && (\n              <div className=\"mb-2 flex items-center gap-2 p-2 bg-muted rounded-lg\">\n                <Paperclip className=\"w-4 h-4 text-muted-foreground\" />\n                <span className=\"text-sm flex-1 truncate\">{selectedFile.name}</span>\n                <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6\" onClick={removeSelectedFile}>\n                  <X className=\"w-4 h-4\" />\n                </Button>\n              </div>\n            )}\n            <div className=\"flex gap-2\">\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                className=\"hidden\"\n                accept=\"image/*,video/*,audio/*,.pdf,.doc,.docx,.xls,.xlsx,.txt\"\n                onChange={handleFileSelect}\n              />\n              <Button\n                variant=\"outline\"\n                size=\"icon\"\n                className=\"h-[60px] w-[60px] flex-shrink-0 bg-transparent\"\n                onClick={() => fileInputRef.current?.click()}\n                disabled={sending}\n              >\n                <Paperclip className=\"w-5 h-5\" />\n              </Button>\n\n              <Button\n                variant=\"outline\"\n                size=\"icon\"\n                className=\"h-[60px] w-[60px] flex-shrink-0 bg-transparent\"\n                onClick={() => setQuickRepliesOpen(true)}\n              >\n                <Zap className=\"w-5 h-5\" />\n              </Button>\n              <Textarea\n                value={newMessage}\n                onChange={(e) => {\n                  setNewMessage(e.target.value)\n                  registerActivity(\"typing\")\n                }}\n                onKeyDown={handleKeyPress}\n                placeholder=\"Digite sua mensagem...\"\n                className=\"resize-none min-h-[60px] max-h-[200px]\"\n                rows={2}\n              />\n              <Button\n                onClick={handleSendMessage}\n                disabled={(!newMessage.trim() && !selectedFile) || sending}\n                size=\"icon\"\n                className=\"h-[60px] w-[60px] flex-shrink-0\"\n              >\n                {sending ? <Loader2 className=\"w-5 h-5 animate-spin\" /> : <Send className=\"w-5 h-5\" />}\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <Sheet open={quickRepliesOpen} onOpenChange={setQuickRepliesOpen}>\n        <SheetContent side=\"right\">\n          <SheetHeader>\n            <SheetTitle>Respostas Rápidas</SheetTitle>\n            <SheetDescription>Selecione uma resposta rápida para enviar</SheetDescription>\n          </SheetHeader>\n          <QuickRepliesPanel onSelectReply={handleQuickReply} />\n        </SheetContent>\n      </Sheet>\n\n      <AssignmentHistoryDialog\n        open={showHistoryDialog}\n        onOpenChange={setShowHistoryDialog}\n        chatId={chatId}\n        chatName={safeChatName}\n      />\n\n      <AssignToUserDialog\n        open={showAssignToUserDialog}\n        onOpenChange={setShowAssignToUserDialog}\n        chatId={chatId}\n        chatName={safeChatName}\n        currentUserId={userId}\n        currentAssignment={assignmentForDialog}\n        onAssignSuccess={() => {\n          loadAssignment()\n        }}\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4495, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/whatsapp/connection-status.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useRef } from \"react\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Unplug, CheckCircle2, XCircle, AlertTriangle, Check } from \"lucide-react\"\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\"\nimport type { ConnectionStatus as ConnectionStatusType } from \"@/lib/whatsapp-types\"\n\ninterface ConnectionStatusProps {\n  onStatusChange?: (connected: boolean) => void\n}\n\nfunction formatPhoneNumber(phone: string): string {\n  // Remove caracteres especiais como :23@s.whatsapp.net\n  const cleanPhone = phone.replace(/@.*$/, \"\").replace(/:\\d+$/, \"\")\n\n  if (cleanPhone.startsWith(\"55\")) {\n    const withoutCountryCode = cleanPhone.substring(2)\n\n    if (withoutCountryCode.length === 10) {\n      // Número com 10 dígitos após o 55: DDD (2) + número (8)\n      // Exemplo: 555193498226 -> adiciona 9 após 51 -> 5551993498226\n      const ddd = withoutCountryCode.substring(0, 2) // 51\n      const number = withoutCountryCode.substring(2) // 93498226\n\n      // Insere o 9 após o DDD\n      const fullNumber = \"9\" + number // 993498226\n      const firstPart = fullNumber.substring(0, 5) // 99349\n      const secondPart = fullNumber.substring(5) // 8226\n\n      return `+55 (${ddd}) ${firstPart}-${secondPart}` // +55 (51) 99349-8226\n    } else if (withoutCountryCode.length === 11) {\n      // Número já com 11 dígitos após o 55: DDD (2) + 9 (1) + número (8)\n      const ddd = withoutCountryCode.substring(0, 2)\n      const firstPart = withoutCountryCode.substring(2, 7) // 5 dígitos (9XXXX)\n      const secondPart = withoutCountryCode.substring(7) // 4 dígitos\n      return `+55 (${ddd}) ${firstPart}-${secondPart}`\n    } else if (withoutCountryCode.length === 8) {\n      // Número fixo com 8 dígitos: XXXX-XXXX\n      const ddd = \"00\" // DDD desconhecido\n      const firstPart = withoutCountryCode.substring(0, 4)\n      const secondPart = withoutCountryCode.substring(4)\n      return `+55 (${ddd}) ${firstPart}-${secondPart}`\n    }\n  }\n\n  // Se não for formato brasileiro, retorna com + na frente\n  return `+${cleanPhone}`\n}\n\nexport function ConnectionStatus({ onStatusChange }: ConnectionStatusProps) {\n  const [status, setStatus] = useState<ConnectionStatusType & { loading: boolean }>({\n    connected: false,\n    phone: null,\n    qr: null,\n    loading: true,\n  })\n  const [error, setError] = useState<string | null>(null)\n  const [needsConfiguration, setNeedsConfiguration] = useState(false)\n\n  const intervalRef = useRef<NodeJS.Timeout | null>(null)\n\n  useEffect(() => {\n    const handleConfigChange = () => {\n      // Recarregar status quando houver mudança na config\n      checkStatus()\n    }\n\n    window.addEventListener(\"whatsapp:config\", handleConfigChange as EventListener)\n\n    return () => {\n      window.removeEventListener(\"whatsapp:config\", handleConfigChange as EventListener)\n    }\n  }, [])\n\n  useEffect(() => {\n    checkStatus()\n\n    // Limpar interval anterior\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current)\n      intervalRef.current = null\n    }\n\n    // Só fazer polling se NÃO estiver conectado\n    if (!status.connected) {\n      intervalRef.current = setInterval(checkStatus, 30000)\n    }\n\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current)\n        intervalRef.current = null\n      }\n    }\n  }, [status.connected]) // Re-executar quando status.connected mudar\n\n  async function checkStatus() {\n    try {\n      setError(null)\n      const response = await fetch(\"/api/whatsapp/status\")\n\n      const data = await response.json()\n\n      if (data.success) {\n        setStatus({\n          connected: data.connected,\n          phone: data.phone,\n          qr: data.qr,\n          status: data.status,\n          device: data.device,\n          loading: false,\n        })\n        setNeedsConfiguration(false)\n        onStatusChange?.(data.connected)\n      } else {\n        setError(data.message || \"Erro ao verificar status\")\n        setNeedsConfiguration(data.needsConfiguration || false)\n        setStatus((prev) => ({ ...prev, loading: false }))\n      }\n    } catch (err) {\n      console.error(\"[v0] 💥 Erro:\", err)\n      setError(\"Não foi possível conectar ao servidor\")\n      setNeedsConfiguration(true)\n      setStatus((prev) => ({ ...prev, loading: false, connected: false }))\n      onStatusChange?.(false)\n    }\n  }\n\n  if (status.loading) {\n    return <Badge variant=\"secondary\">Verificando...</Badge>\n  }\n\n  if (error) {\n    if (needsConfiguration) {\n      return (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger asChild>\n              <Badge variant=\"destructive\" className=\"gap-1 cursor-help\">\n                <AlertTriangle className=\"w-3 h-3\" />\n                Servidor Offline\n              </Badge>\n            </TooltipTrigger>\n            <TooltipContent className=\"max-w-xs\">\n              <div className=\"space-y-2\">\n                <p className=\"text-sm font-medium\">{error}</p>\n                <p className=\"text-xs text-muted-foreground\">\n                  Verifique em Ajustes se a URL do servidor está correta e se o serviço está ativo no Railway.\n                </p>\n              </div>\n            </TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      )\n    }\n\n    return (\n      <TooltipProvider>\n        <Tooltip>\n          <TooltipTrigger asChild>\n            <Badge variant=\"destructive\" className=\"gap-1 cursor-help\">\n              <XCircle className=\"w-3 h-3\" />\n              Erro de Conexão\n            </Badge>\n          </TooltipTrigger>\n          <TooltipContent className=\"max-w-xs\">\n            <p className=\"text-sm\">{error}</p>\n          </TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n    )\n  }\n\n  if (status.connected) {\n    const formattedPhone = status.phone ? formatPhoneNumber(status.phone) : null\n\n    return (\n      <TooltipProvider>\n        <Tooltip>\n          <TooltipTrigger asChild>\n            <Badge variant=\"default\" className=\"gap-2 cursor-help bg-green-600 hover:bg-green-700 px-4 py-2 text-sm\">\n              <CheckCircle2 className=\"w-4 h-4\" />\n              <span>Conectado {formattedPhone}</span>\n              <Check className=\"w-4 h-4 ml-1\" />\n            </Badge>\n          </TooltipTrigger>\n          <TooltipContent className=\"max-w-xs\">\n            <p className=\"text-sm\">\n              WhatsApp conectado e funcionando\n              {status.device && ` • ${status.device.name || status.device.platform}`}\n            </p>\n          </TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n    )\n  }\n\n  return (\n    <TooltipProvider>\n      <Tooltip>\n        <TooltipTrigger asChild>\n          <Badge variant=\"secondary\" className=\"gap-1 cursor-help\">\n            <Unplug className=\"w-3 h-3\" />\n            Desconectado\n          </Badge>\n        </TooltipTrigger>\n        <TooltipContent className=\"max-w-xs\">\n          <p className=\"text-sm\">WhatsApp não está conectado. Configure o servidor e escaneie o QR Code.</p>\n        </TooltipContent>\n      </Tooltip>\n    </TooltipProvider>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4924, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS","debugId":null}},
    {"offset": {"line": 5044, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/ui/label.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as LabelPrimitive from '@radix-ui/react-label'\n\nimport { cn } from '@/lib/utils'\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        'flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,6LAAC,4KAAmB;QAClB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 5077, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/ui/popover.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as PopoverPrimitive from '@radix-ui/react-popover'\n\nimport { cn } from '@/lib/utils'\n\nfunction Popover({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Root>) {\n  return <PopoverPrimitive.Root data-slot=\"popover\" {...props} />\n}\n\nfunction PopoverTrigger({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {\n  return <PopoverPrimitive.Trigger data-slot=\"popover-trigger\" {...props} />\n}\n\nfunction PopoverContent({\n  className,\n  align = 'center',\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Content>) {\n  return (\n    <PopoverPrimitive.Portal>\n      <PopoverPrimitive.Content\n        data-slot=\"popover-content\"\n        align={align}\n        sideOffset={sideOffset}\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden',\n          className,\n        )}\n        {...props}\n      />\n    </PopoverPrimitive.Portal>\n  )\n}\n\nfunction PopoverAnchor({\n  ...props\n}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) {\n  return <PopoverPrimitive.Anchor data-slot=\"popover-anchor\" {...props} />\n}\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,QAAQ,EACf,GAAG,OACgD;IACnD,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAW,GAAG,KAAK;;;;;;AAC7D;KAJS;AAMT,SAAS,eAAe,EACtB,GAAG,OACmD;IACtD,qBAAO,6LAAC,iLAAwB;QAAC,aAAU;QAAmB,GAAG,KAAK;;;;;;AACxE;MAJS;AAMT,SAAS,eAAe,EACtB,SAAS,EACT,QAAQ,QAAQ,EAChB,aAAa,CAAC,EACd,GAAG,OACmD;IACtD,qBACE,6LAAC,gLAAuB;kBACtB,cAAA,6LAAC,iLAAwB;YACvB,aAAU;YACV,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,qHAAE,EACX,keACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIjB;MApBS;AAsBT,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,6LAAC,gLAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;MAJS","debugId":null}},
    {"offset": {"line": 5160, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/ui/calendar.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport { ChevronDownIcon, ChevronLeftIcon, ChevronRightIcon } from 'lucide-react'\nimport { DayButton, DayPicker, getDefaultClassNames } from 'react-day-picker'\nimport { ptBR } from 'date-fns/locale'\n\nimport { cn } from '@/lib/utils'\nimport { Button, buttonVariants } from '@/components/ui/button'\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  captionLayout = 'label',\n  buttonVariant = 'ghost',\n  formatters,\n  components,\n  ...props\n}: React.ComponentProps<typeof DayPicker> & {\n  buttonVariant?: React.ComponentProps<typeof Button>['variant']\n}) {\n  const defaultClassNames = getDefaultClassNames()\n\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      locale={ptBR}\n      className={cn(\n        'bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent',\n        className,\n      )}\n      captionLayout={captionLayout}\n      formatters={{\n        formatMonthDropdown: (date) =>\n          date.toLocaleString('default', { month: 'short' }),\n        ...formatters,\n      }}\n      classNames={{\n        root: cn('w-fit', defaultClassNames.root),\n        months: cn(\n          'flex gap-4 flex-col md:flex-row relative',\n          defaultClassNames.months,\n        ),\n        month: cn('flex flex-col w-full gap-4', defaultClassNames.month),\n        nav: cn(\n          'flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between',\n          defaultClassNames.nav,\n        ),\n        button_previous: cn(\n          buttonVariants({ variant: buttonVariant }),\n          'size-(--cell-size) aria-disabled:opacity-50 p-0 select-none',\n          defaultClassNames.button_previous,\n        ),\n        button_next: cn(\n          buttonVariants({ variant: buttonVariant }),\n          'size-(--cell-size) aria-disabled:opacity-50 p-0 select-none',\n          defaultClassNames.button_next,\n        ),\n        month_caption: cn(\n          'flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)',\n          defaultClassNames.month_caption,\n        ),\n        dropdowns: cn(\n          'w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5',\n          defaultClassNames.dropdowns,\n        ),\n        dropdown_root: cn(\n          'relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md',\n          defaultClassNames.dropdown_root,\n        ),\n        dropdown: cn(\n          'absolute bg-popover inset-0 opacity-0',\n          defaultClassNames.dropdown,\n        ),\n        caption_label: cn(\n          'select-none font-medium',\n          captionLayout === 'label'\n            ? 'text-sm'\n            : 'rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5',\n          defaultClassNames.caption_label,\n        ),\n        table: 'w-full border-collapse',\n        weekdays: cn('flex', defaultClassNames.weekdays),\n        weekday: cn(\n          'text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none',\n          defaultClassNames.weekday,\n        ),\n        week: cn('flex w-full mt-2', defaultClassNames.week),\n        week_number_header: cn(\n          'select-none w-(--cell-size)',\n          defaultClassNames.week_number_header,\n        ),\n        week_number: cn(\n          'text-[0.8rem] select-none text-muted-foreground',\n          defaultClassNames.week_number,\n        ),\n        day: cn(\n          'relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none',\n          defaultClassNames.day,\n        ),\n        range_start: cn(\n          'rounded-l-md bg-accent',\n          defaultClassNames.range_start,\n        ),\n        range_middle: cn('rounded-none', defaultClassNames.range_middle),\n        range_end: cn('rounded-r-md bg-accent', defaultClassNames.range_end),\n        today: cn(\n          'bg-primary text-primary-foreground rounded-md data-[selected=true]:rounded-none font-semibold',\n          defaultClassNames.today,\n        ),\n        outside: cn(\n          'text-muted-foreground aria-selected:text-muted-foreground',\n          defaultClassNames.outside,\n        ),\n        disabled: cn(\n          'text-muted-foreground opacity-50',\n          defaultClassNames.disabled,\n        ),\n        hidden: cn('invisible', defaultClassNames.hidden),\n        ...classNames,\n      }}\n      components={{\n        Root: ({ className, rootRef, ...props }) => {\n          return (\n            <div\n              data-slot=\"calendar\"\n              ref={rootRef}\n              className={cn(className)}\n              {...props}\n            />\n          )\n        },\n        Chevron: ({ className, orientation, ...props }) => {\n          if (orientation === 'left') {\n            return (\n              <ChevronLeftIcon className={cn('size-4', className)} {...props} />\n            )\n          }\n\n          if (orientation === 'right') {\n            return (\n              <ChevronRightIcon\n                className={cn('size-4', className)}\n                {...props}\n              />\n            )\n          }\n\n          return (\n            <ChevronDownIcon className={cn('size-4', className)} {...props} />\n          )\n        },\n        DayButton: CalendarDayButton,\n        WeekNumber: ({ children, ...props }) => {\n          return (\n            <td {...props}>\n              <div className=\"flex size-(--cell-size) items-center justify-center text-center\">\n                {children}\n              </div>\n            </td>\n          )\n        },\n        ...components,\n      }}\n      {...props}\n    />\n  )\n}\n\nfunction CalendarDayButton({\n  className,\n  day,\n  modifiers,\n  ...props\n}: React.ComponentProps<typeof DayButton>) {\n  const defaultClassNames = getDefaultClassNames()\n\n  const ref = React.useRef<HTMLButtonElement>(null)\n  React.useEffect(() => {\n    if (modifiers.focused) ref.current?.focus()\n  }, [modifiers.focused])\n\n  return (\n    <Button\n      ref={ref}\n      variant=\"ghost\"\n      size=\"icon\"\n      data-day={day.date.toLocaleDateString()}\n      data-selected-single={\n        modifiers.selected &&\n        !modifiers.range_start &&\n        !modifiers.range_end &&\n        !modifiers.range_middle\n      }\n      data-range-start={modifiers.range_start}\n      data-range-end={modifiers.range_end}\n      data-range-middle={modifiers.range_middle}\n      className={cn(\n        'data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70',\n        defaultClassNames.day,\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Calendar, CalendarDayButton }\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5342, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/ui/checkbox.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as CheckboxPrimitive from '@radix-ui/react-checkbox'\nimport { CheckIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Checkbox({\n  className,\n  ...props\n}: React.ComponentProps<typeof CheckboxPrimitive.Root>) {\n  return (\n    <CheckboxPrimitive.Root\n      data-slot=\"checkbox\"\n      className={cn(\n        'peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    >\n      <CheckboxPrimitive.Indicator\n        data-slot=\"checkbox-indicator\"\n        className=\"flex items-center justify-center text-current transition-none\"\n      >\n        <CheckIcon className=\"size-3.5\" />\n      </CheckboxPrimitive.Indicator>\n    </CheckboxPrimitive.Root>\n  )\n}\n\nexport { Checkbox }\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACiD;IACpD,qBACE,6LAAC,+KAAsB;QACrB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,+eACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,oLAA2B;YAC1B,aAAU;YACV,WAAU;sBAEV,cAAA,6LAAC,wNAAS;gBAAC,WAAU;;;;;;;;;;;;;;;;AAI7B;KArBS","debugId":null}},
    {"offset": {"line": 5392, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/whatsapp/quick-lead-form.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useEffect } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\"\nimport { Calendar } from \"@/components/ui/calendar\"\nimport { Checkbox } from \"@/components/ui/checkbox\"\nimport {\n  CalendarIcon,\n  Phone,\n  MessageCircle,\n  MapPin,\n  FileText,\n  RefreshCw,\n  Users,\n  MoreHorizontal,\n  Loader2,\n  X,\n} from \"lucide-react\"\nimport { useUser } from \"@/contexts/user-context\"\nimport { createClient } from \"@/lib/supabase/client\"\nimport { toast } from \"sonner\"\nimport { format } from \"date-fns\"\nimport { ptBR } from \"date-fns/locale\"\nimport { cn } from \"@/lib/utils\"\n\ntype QuickLeadFormProps = {\n  chatId: string\n  chatName: string\n  onSuccess: () => void\n  onCancel: () => void\n}\n\nexport function QuickLeadForm({ chatId, chatName, onSuccess, onCancel }: QuickLeadFormProps) {\n  const [nome, setNome] = useState(chatName)\n  const [cidade, setCidade] = useState(\"\")\n  const [interesse, setInteresse] = useState<string[]>([])\n  const [interesseOutro, setInteresseOutro] = useState(\"\")\n  const [showEndereco, setShowEndereco] = useState(false)\n  const [showCargo, setShowCargo] = useState(false)\n  const [cargo, setCargo] = useState(\"\")\n  const [endereco, setEndereco] = useState(\"\")\n  const [telefone, setTelefone] = useState(chatId.includes(\"@\") ? chatId.split(\"@\")[0] : \"\")\n  const [temperatura, setTemperatura] = useState<\"Quente\" | \"Morno\" | \"Frio\">(\"Morno\")\n  const [proximoContato, setProximoContato] = useState<Date | undefined>(new Date())\n  const [acao, setAcao] = useState(\"\")\n  const [observacao, setObservacao] = useState(\"\")\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const { user } = useUser()\n  const supabase = createClient()\n\n  const formatPhone = (value: string) => {\n    const numbers = value.replace(/\\D/g, \"\")\n    if (numbers.length <= 10) {\n      return numbers.replace(/(\\d{2})(\\d{4})(\\d{0,4})/, (_, ddd, p1, p2) => {\n        return `(${ddd}) ${p1}${p2 ? \"-\" + p2 : \"\"}`\n      })\n    }\n    return numbers.replace(/(\\d{2})(\\d{5})(\\d{0,4})/, (_, ddd, p1, p2) => {\n      return `(${ddd}) ${p1}${p2 ? \"-\" + p2 : \"\"}`\n    })\n  }\n\n  const formatInteresse = () => {\n    const items = [...interesse]\n    if (items.includes(\"Outro\") && interesseOutro.trim()) {\n      items[items.indexOf(\"Outro\")] = interesseOutro.trim()\n    }\n\n    if (items.length === 0) return \"\"\n    if (items.length === 1) return items[0]\n    if (items.length === 2) return items.join(\" e \")\n\n    const last = items.pop()\n    return items.join(\", \") + \" e \" + last\n  }\n\n  const formatDateToISO = (date: Date): string => {\n    const day = date.getDate().toString().padStart(2, \"0\")\n    const month = (date.getMonth() + 1).toString().padStart(2, \"0\")\n    const year = date.getFullYear()\n    return `${year}-${month}-${day}`\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!user || !nome.trim() || !cidade.trim() || interesse.length === 0) {\n      toast.error(\"Preencha todos os campos obrigatórios\")\n      return\n    }\n\n    setIsSubmitting(true)\n\n    const interesseFormatado = formatInteresse()\n    const proximoContatoStr = proximoContato ? formatDateToISO(proximoContato) : null\n\n    const { error } = await supabase.from(\"leads\").insert({\n      nome: nome.trim(),\n      cidade: cidade.trim(),\n      interesse: interesseFormatado,\n      telefone: telefone.trim() || null,\n      endereco: endereco.trim() || null,\n      cargo: cargo.trim() || null,\n      temperatura,\n      proximo_contato: proximoContatoStr,\n      dia_semana: proximoContatoStr,\n      adicionado_por_id: user.id,\n      adicionado_por_nome: user.nome,\n      acao: acao.trim() || null,\n      observacao: observacao.trim() || null,\n      status: \"ativo\",\n    })\n\n    if (error) {\n      console.error(\"[v0] Error creating lead:\", error)\n      toast.error(\"Erro ao criar lead\")\n      setIsSubmitting(false)\n      return\n    }\n\n    await supabase.from(\"lead_logs\").insert({\n      usuario_id: user.id,\n      usuario_nome: user.nome,\n      acao: \"criado\",\n      detalhes: `Lead \"${nome}\" criado via WhatsApp`,\n    })\n\n    setIsSubmitting(false)\n    onSuccess()\n  }\n\n  useEffect(() => {\n    setNome(chatName)\n    setCidade(\"\")\n    setInteresse([])\n    setInteresseOutro(\"\")\n    setShowEndereco(false)\n    setShowCargo(false)\n    setCargo(\"\")\n    setEndereco(\"\")\n    setTelefone(chatId.includes(\"@\") ? chatId.split(\"@\")[0] : \"\")\n    setTemperatura(\"Morno\")\n    setProximoContato(new Date())\n    setAcao(\"\")\n    setObservacao(\"\")\n  }, [chatId, chatName])\n\n  return (\n    <div className=\"p-6 h-full flex flex-col\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <h2 className=\"text-2xl font-bold\">Novo Lead</h2>\n        <Button variant=\"ghost\" size=\"icon\" onClick={onCancel}>\n          <X className=\"h-5 w-5\" />\n        </Button>\n      </div>\n\n      <form onSubmit={handleSubmit} className=\"space-y-4 flex-1 overflow-y-auto\">\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"nome\">Nome *</Label>\n          <Input id=\"nome\" value={nome} onChange={(e) => setNome(e.target.value)} placeholder=\"Nome do lead\" required />\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"cidade\">Cidade *</Label>\n          <Input\n            id=\"cidade\"\n            value={cidade}\n            onChange={(e) => setCidade(e.target.value)}\n            placeholder=\"Cidade do lead\"\n            required\n          />\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"interesse\">Interesse *</Label>\n          <div className=\"border rounded-md p-3 space-y-2\">\n            {[\"Guarda-corpo\", \"Corrimão\", \"Box\", \"Outro\"].map((item) => (\n              <div key={item} className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id={`interesse-${item}`}\n                  checked={interesse.includes(item)}\n                  onCheckedChange={(checked) => {\n                    if (checked) {\n                      setInteresse([...interesse, item])\n                    } else {\n                      setInteresse(interesse.filter((i) => i !== item))\n                      if (item === \"Outro\") setInteresseOutro(\"\")\n                    }\n                  }}\n                />\n                <label htmlFor={`interesse-${item}`} className=\"text-sm font-medium leading-none cursor-pointer\">\n                  {item}\n                </label>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {interesse.includes(\"Outro\") && (\n          <div className=\"space-y-2\">\n            <Input\n              id=\"interesse-outro\"\n              value={interesseOutro}\n              onChange={(e) => setInteresseOutro(e.target.value)}\n              placeholder=\"Especifique o interesse\"\n            />\n          </div>\n        )}\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"telefone\">Telefone</Label>\n          <Input\n            id=\"telefone\"\n            value={telefone}\n            onChange={(e) => setTelefone(formatPhone(e.target.value))}\n            placeholder=\"(00) 00000-0000\"\n            maxLength={15}\n          />\n        </div>\n\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center space-x-2\">\n            <Checkbox\n              id=\"show-endereco\"\n              checked={showEndereco}\n              onCheckedChange={(checked) => {\n                setShowEndereco(checked as boolean)\n                if (!checked) setEndereco(\"\")\n              }}\n            />\n            <label\n              htmlFor=\"show-endereco\"\n              className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer\"\n            >\n              Endereço (Opcional)\n            </label>\n          </div>\n          {showEndereco && (\n            <Input\n              id=\"endereco\"\n              value={endereco}\n              onChange={(e) => setEndereco(e.target.value)}\n              placeholder=\"Endereço completo\"\n            />\n          )}\n        </div>\n\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center space-x-2\">\n            <Checkbox\n              id=\"show-cargo\"\n              checked={showCargo}\n              onCheckedChange={(checked) => {\n                setShowCargo(checked as boolean)\n                if (!checked) setCargo(\"\")\n              }}\n            />\n            <label\n              htmlFor=\"show-cargo\"\n              className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer\"\n            >\n              Cargo (Opcional)\n            </label>\n          </div>\n          {showCargo && (\n            <Input\n              id=\"cargo\"\n              value={cargo}\n              onChange={(e) => setCargo(e.target.value)}\n              placeholder=\"Ex: Gerente, Proprietário, etc.\"\n            />\n          )}\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"temperatura\">Temperatura *</Label>\n          <Select value={temperatura} onValueChange={(v) => setTemperatura(v as any)}>\n            <SelectTrigger>\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"Frio\">\n                <div className=\"flex items-center gap-2\">\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"16\"\n                    height=\"16\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    className=\"lucide lucide-snowflake\"\n                  >\n                    <path d=\"m10 20-1.25-2.5L6 18\" />\n                    <path d=\"M10 4 8.75 6.5 6 6\" />\n                    <path d=\"m14 20 1.25-2.5L18 18\" />\n                    <path d=\"m14 4 1.25 2.5L18 6\" />\n                    <path d=\"m17 21-3-6h-4\" />\n                    <path d=\"m17 3-3 6 1.5 3\" />\n                    <path d=\"M2 12h6.5L10 9\" />\n                    <path d=\"m20 10-1.5 2 1.5 2\" />\n                    <path d=\"M22 12h-6.5L14 15\" />\n                    <path d=\"m4 10 1.5 2L4 14\" />\n                    <path d=\"m7 21 3-6-1.5-3\" />\n                    <path d=\"m7 3 3 6h4\" />\n                  </svg>\n                  <span>Frio</span>\n                </div>\n              </SelectItem>\n              <SelectItem value=\"Morno\">\n                <div className=\"flex items-center gap-2\">\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"16\"\n                    height=\"16\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    className=\"lucide lucide-coffee\"\n                  >\n                    <path d=\"M10 2v2\" />\n                    <path d=\"M14 2v2\" />\n                    <path d=\"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1\" />\n                    <path d=\"M6 2v2\" />\n                  </svg>\n                  <span>Morno</span>\n                </div>\n              </SelectItem>\n              <SelectItem value=\"Quente\">\n                <div className=\"flex items-center gap-2\">\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"16\"\n                    height=\"16\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    className=\"lucide lucide-flame\"\n                  >\n                    <path d=\"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4\" />\n                  </svg>\n                  <span>Quente</span>\n                </div>\n              </SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"proximo-contato\">Próximo Contato</Label>\n          <Popover>\n            <PopoverTrigger asChild>\n              <Button\n                id=\"proximo-contato\"\n                variant=\"outline\"\n                className={cn(\"w-full justify-start text-left font-normal\", !proximoContato && \"text-muted-foreground\")}\n              >\n                <CalendarIcon className=\"mr-2 h-4 w-4\" />\n                {proximoContato ? format(proximoContato, \"PPP\", { locale: ptBR }) : <span>Selecione uma data</span>}\n              </Button>\n            </PopoverTrigger>\n            <PopoverContent className=\"w-auto p-0\" align=\"start\">\n              <Calendar mode=\"single\" selected={proximoContato} onSelect={setProximoContato} initialFocus />\n            </PopoverContent>\n          </Popover>\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"acao\">Ação</Label>\n          <Select value={acao} onValueChange={setAcao}>\n            <SelectTrigger id=\"acao\">\n              <SelectValue placeholder=\"O que fazer quando chegar o dia?\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"Ligar\">\n                <div className=\"flex items-center gap-2\">\n                  <Phone className=\"w-4 h-4\" />\n                  <span>Ligar</span>\n                </div>\n              </SelectItem>\n              <SelectItem value=\"Enviar mensagem\">\n                <div className=\"flex items-center gap-2\">\n                  <MessageCircle className=\"w-4 h-4\" />\n                  <span>Enviar mensagem</span>\n                </div>\n              </SelectItem>\n              <SelectItem value=\"Visitar\">\n                <div className=\"flex items-center gap-2\">\n                  <MapPin className=\"w-4 h-4\" />\n                  <span>Visitar</span>\n                </div>\n              </SelectItem>\n              <SelectItem value=\"Enviar proposta\">\n                <div className=\"flex items-center gap-2\">\n                  <FileText className=\"w-4 h-4\" />\n                  <span>Enviar proposta</span>\n                </div>\n              </SelectItem>\n              <SelectItem value=\"Follow-up\">\n                <div className=\"flex items-center gap-2\">\n                  <RefreshCw className=\"w-4 h-4\" />\n                  <span>Follow-up</span>\n                </div>\n              </SelectItem>\n              <SelectItem value=\"Reunião\">\n                <div className=\"flex items-center gap-2\">\n                  <Users className=\"w-4 h-4\" />\n                  <span>Reunião</span>\n                </div>\n              </SelectItem>\n              <SelectItem value=\"Outro\">\n                <div className=\"flex items-center gap-2\">\n                  <MoreHorizontal className=\"w-4 h-4\" />\n                  <span>Outro</span>\n                </div>\n              </SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"observacao\">Observação</Label>\n          <Textarea\n            id=\"observacao\"\n            value={observacao}\n            onChange={(e) => setObservacao(e.target.value)}\n            placeholder=\"Adicione detalhes importantes sobre este lead...\"\n            rows={3}\n          />\n        </div>\n        <div className=\"flex gap-3 pt-4\">\n          <Button type=\"button\" variant=\"outline\" onClick={onCancel} className=\"flex-1 bg-transparent\">\n            Cancelar\n          </Button>\n          <Button type=\"submit\" disabled={isSubmitting} className=\"flex-1\">\n            {isSubmitting ? (\n              <>\n                <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                Salvando...\n              </>\n            ) : (\n              \"Criar Lead\"\n            )}\n          </Button>\n        </div>\n      </form>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6573, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/components/whatsapp/new-contact-dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { UserPlus, Loader2 } from \"lucide-react\"\nimport { toast } from \"sonner\"\n\nconst COUNTRIES = [\n  { code: \"+55\", name: \"Brasil\", emoji: \"🇧🇷\" },\n  { code: \"+1\", name: \"Estados Unidos\", emoji: \"🇺🇸\" },\n  { code: \"+54\", name: \"Argentina\", emoji: \"🇦🇷\" },\n  { code: \"+56\", name: \"Chile\", emoji: \"🇨🇱\" },\n  { code: \"+57\", name: \"Colômbia\", emoji: \"🇨🇴\" },\n  { code: \"+51\", name: \"Peru\", emoji: \"🇵🇪\" },\n  { code: \"+52\", name: \"México\", emoji: \"🇲🇽\" },\n  { code: \"+351\", name: \"Portugal\", emoji: \"🇵🇹\" },\n  { code: \"+34\", name: \"Espanha\", emoji: \"🇪🇸\" },\n  { code: \"+44\", name: \"Reino Unido\", emoji: \"🇬🇧\" },\n  { code: \"+33\", name: \"França\", emoji: \"🇫🇷\" },\n  { code: \"+49\", name: \"Alemanha\", emoji: \"🇩🇪\" },\n  { code: \"+39\", name: \"Itália\", emoji: \"🇮🇹\" },\n  { code: \"+81\", name: \"Japão\", emoji: \"🇯🇵\" },\n  { code: \"+86\", name: \"China\", emoji: \"🇨🇳\" },\n]\n\ninterface NewContactDialogProps {\n  onContactCreated: (chatId: string) => void\n}\n\nexport function NewContactDialog({ onContactCreated }: NewContactDialogProps) {\n  const [open, setOpen] = useState(false)\n  const [name, setName] = useState(\"\")\n  const [phone, setPhone] = useState(\"\")\n  const [countryCode, setCountryCode] = useState(\"+55\")\n  const [isSubmitting, setIsSubmitting] = useState(false)\n\n  const formatPhone = (value: string) => {\n    const numbers = value.replace(/\\D/g, \"\")\n    if (numbers.length <= 10) {\n      return numbers.replace(/(\\d{2})(\\d{4})(\\d{0,4})/, (_, ddd, p1, p2) => {\n        return `(${ddd}) ${p1}${p2 ? \"-\" + p2 : \"\"}`\n      })\n    }\n    return numbers.replace(/(\\d{2})(\\d{5})(\\d{0,4})/, (_, ddd, p1, p2) => {\n      return `(${ddd}) ${p1}${p2 ? \"-\" + p2 : \"\"}`\n    })\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!name.trim() || !phone.trim()) {\n      toast.error(\"Preencha todos os campos\")\n      return\n    }\n\n    setIsSubmitting(true)\n\n    try {\n      // Extract only numbers from phone\n      const phoneNumbers = phone.replace(/\\D/g, \"\")\n      const fullPhone = `${countryCode.replace(\"+\", \"\")}${phoneNumbers}`\n\n      // Create chat with WhatsApp API\n      const response = await fetch(\"/api/whatsapp/create-chat\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          name: name.trim(),\n          phone: fullPhone,\n        }),\n      })\n\n      const data = await response.json()\n\n      if (data.success) {\n        toast.success(\"Conversa iniciada com sucesso!\")\n        onContactCreated(data.chatId)\n        setOpen(false)\n        setName(\"\")\n        setPhone(\"\")\n        setCountryCode(\"+55\")\n      } else {\n        toast.error(data.message || \"Erro ao criar conversa\")\n      }\n    } catch (error) {\n      console.error(\"[v0] Error creating contact:\", error)\n      toast.error(\"Erro ao criar contato\")\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        <Button variant=\"outline\" className=\"w-full gap-2 bg-transparent\">\n          <UserPlus className=\"w-4 h-4\" />\n          Novo Contato\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"sm:max-w-[425px]\">\n        <DialogHeader>\n          <DialogTitle>Novo Contato</DialogTitle>\n          <DialogDescription>Inicie uma conversa com um novo número do WhatsApp</DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit}>\n          <div className=\"grid gap-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"name\">Nome *</Label>\n              <Input\n                id=\"name\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n                placeholder=\"Nome do contato\"\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"country\">País *</Label>\n              <Select value={countryCode} onValueChange={setCountryCode}>\n                <SelectTrigger id=\"country\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {COUNTRIES.map((country) => (\n                    <SelectItem key={country.code} value={country.code}>\n                      <span className=\"flex items-center gap-2\">\n                        <span>{country.emoji}</span>\n                        <span>{country.name}</span>\n                        <span className=\"text-muted-foreground\">({country.code})</span>\n                      </span>\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"phone\">Telefone *</Label>\n              <div className=\"flex gap-2\">\n                <div className=\"flex items-center px-3 border rounded-md bg-muted text-muted-foreground min-w-[70px] justify-center\">\n                  {countryCode}\n                </div>\n                <Input\n                  id=\"phone\"\n                  value={phone}\n                  onChange={(e) => setPhone(formatPhone(e.target.value))}\n                  placeholder=\"(00) 00000-0000\"\n                  maxLength={15}\n                  className=\"flex-1\"\n                  required\n                />\n              </div>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => setOpen(false)} disabled={isSubmitting}>\n              Cancelar\n            </Button>\n            <Button type=\"submit\" disabled={isSubmitting}>\n              {isSubmitting ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                  Criando...\n                </>\n              ) : (\n                \"Iniciar Conversa\"\n              )}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7030, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Edu%20Bauer/Desktop/Projeto%20Inova%20Inox/app/%28app%29/whatsapp/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useRef } from \"react\"\nimport { ChatList } from \"@/components/whatsapp/chat-list\"\nimport { ChatWindow } from \"@/components/whatsapp/chat-window\"\nimport { ConnectionStatus } from \"@/components/whatsapp/connection-status\"\nimport { Card } from \"@/components/ui/card\"\nimport { MessageSquare } from \"lucide-react\"\nimport Link from \"next/link\"\nimport { Alert, AlertDescription } from \"@/components/ui/alert\"\nimport { AlertCircle } from \"lucide-react\"\nimport { useWhatsAppCache } from \"@/contexts/whatsapp-cache-context\"\nimport { QuickLeadForm } from \"@/components/whatsapp/quick-lead-form\"\nimport { toast } from \"react-toastify\"\nimport { NewContactDialog } from \"@/components/whatsapp/new-contact-dialog\"\nimport type { Chat } from \"@/lib/whatsapp-types\"   // 👈 importa o tipo\n\nexport default function WhatsAppPage() {\n  const { selectedChatId, setSelectedChatId, selectedChatName, setSelectedChatName, invalidateChatsCache } =\n    useWhatsAppCache()\n  const [refreshTrigger, setRefreshTrigger] = useState(0)\n  const [isConnected, setIsConnected] = useState(false)\n  const [showLeadPanel, setShowLeadPanel] = useState(false)\n  const chatListRef = useRef<any>(null)\n\n  // agora recebe um Chat (1 argumento), não mais (chatId, chatName)\n  function handleSelectChat(chat: Chat) {\n    setSelectedChatId(chat.id)\n    // usa o melhor nome que existir, com fallback pro id\n    const displayName =\n      (chat as any).name ??\n      (chat as any).pushName ??\n      chat.id\n    setSelectedChatName(displayName)\n  }\n\n  function handleRefreshChats() {\n    invalidateChatsCache()\n    setRefreshTrigger((prev) => prev + 1)\n  }\n\n  return (\n    <div className=\"p-6 h-screen flex flex-col\">\n      <div className=\"mb-6 flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-balance\">WhatsApp Business</h1>\n          <p className=\"text-muted-foreground mt-1\">Gerencie suas conversas do WhatsApp</p>\n        </div>\n        <div className=\"flex flex-col gap-2\">\n          <ConnectionStatus onStatusChange={setIsConnected} />\n          <NewContactDialog\n            onContactCreated={(chatId) => {\n              handleRefreshChats()\n              setTimeout(() => {\n                setSelectedChatId(chatId)\n              }, 500)\n              toast.success(\"Conversa iniciada com sucesso!\")\n            }}\n          />\n        </div>\n      </div>\n\n      <div className=\"flex-1 flex gap-4 min-h-0\">\n        {/* Container 1: Lista de Chats - largura fixa */}\n        <Card className=\"flex flex-col overflow-hidden w-[380px] flex-shrink-0\">\n          {!isConnected && (\n            <Alert variant=\"destructive\" className=\"m-4 mb-0\">\n              <AlertCircle className=\"h-4 w-4\" />\n              <AlertDescription>\n                WhatsApp desconectado.{\" \"}\n                <Link href=\"/ajustes\" className=\"underline font-medium\">\n                  Configure em Ajustes\n                </Link>\n              </AlertDescription>\n            </Alert>\n          )}\n          <ChatList\n            ref={chatListRef}\n            onSelectChat={handleSelectChat}     // ✅ agora bate com o tipo esperado\n            selectedChatId={selectedChatId}\n            refreshTrigger={refreshTrigger}\n          />\n        </Card>\n\n        {/* Container 2: Mensagens do Chat */}\n        <Card\n          className={`flex flex-col overflow-hidden transition-all duration-300 ease-in-out ${\n            showLeadPanel ? \"flex-[0.75]\" : \"flex-1\"\n          }`}\n        >\n          {selectedChatId ? (\n            <ChatWindow\n              chatId={selectedChatId}\n              chatName={selectedChatName}\n              onRefresh={handleRefreshChats}\n              onToggleLeadPanel={setShowLeadPanel}\n              showLeadPanel={showLeadPanel}\n            />\n          ) : (\n            <div className=\"flex items-center justify-center h-full\">\n              <div className=\"text-center space-y-2\">\n                <MessageSquare className=\"w-12 h-12 mx-auto text-muted-foreground\" />\n                <p className=\"text-muted-foreground\">Selecione uma conversa para começar</p>\n              </div>\n            </div>\n          )}\n        </Card>\n\n        {/* Container 3: Painel de Lead */}\n        {showLeadPanel && selectedChatId && (\n          <Card className=\"flex-[0.25] flex flex-col overflow-hidden transition-all duration-300 ease-in-out animate-in slide-in-from-right-5 fade-in-0\">\n            <div className=\"animate-in fade-in-0 slide-in-from-top-3 duration-500 h-full overflow-y-auto\">\n              <QuickLeadForm\n                key={selectedChatId}\n                chatId={selectedChatId}\n                chatName={selectedChatName}\n                onSuccess={() => {\n                  setShowLeadPanel(false)\n                  toast.success(\"Lead criado com sucesso!\")\n                }}\n                onCancel={() => {\n                  setShowLeadPanel(false)\n                }}\n              />\n            </div>\n          </Card>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAdA;;;;;;;;;;;;;;AAiBe,SAAS;;IACtB,MAAM,EAAE,cAAc,EAAE,iBAAiB,EAAE,gBAAgB,EAAE,mBAAmB,EAAE,oBAAoB,EAAE,GACtG,IAAA,gKAAgB;IAClB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAC;IACrD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC;IACnD,MAAM,cAAc,IAAA,uKAAM,EAAM;IAEhC,kEAAkE;IAClE,SAAS,iBAAiB,IAAU;QAClC,kBAAkB,KAAK,EAAE;QACzB,qDAAqD;QACrD,MAAM,cACJ,AAAC,KAAa,IAAI,IAClB,AAAC,KAAa,QAAQ,IACtB,KAAK,EAAE;QACT,oBAAoB;IACtB;IAEA,SAAS;QACP;QACA,kBAAkB,CAAC,OAAS,OAAO;IACrC;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAAkC;;;;;;0CAChD,6LAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;kCAE5C,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,sKAAgB;gCAAC,gBAAgB;;;;;;0CAClC,6LAAC,0KAAgB;gCACf,kBAAkB,CAAC;oCACjB;oCACA,WAAW;wCACT,kBAAkB;oCACpB,GAAG;oCACH,+JAAK,CAAC,OAAO,CAAC;gCAChB;;;;;;;;;;;;;;;;;;0BAKN,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC,oIAAI;wBAAC,WAAU;;4BACb,CAAC,6BACA,6LAAC,sIAAK;gCAAC,SAAQ;gCAAc,WAAU;;kDACrC,6LAAC,sOAAW;wCAAC,WAAU;;;;;;kDACvB,6LAAC,iJAAgB;;4CAAC;4CACO;0DACvB,6LAAC,0KAAI;gDAAC,MAAK;gDAAW,WAAU;0DAAwB;;;;;;;;;;;;;;;;;;0CAM9D,6LAAC,sJAAQ;gCACP,KAAK;gCACL,cAAc;gCACd,gBAAgB;gCAChB,gBAAgB;;;;;;;;;;;;kCAKpB,6LAAC,oIAAI;wBACH,WAAW,CAAC,sEAAsE,EAChF,gBAAgB,gBAAgB,UAChC;kCAED,+BACC,6LAAC,0JAAU;4BACT,QAAQ;4BACR,UAAU;4BACV,WAAW;4BACX,mBAAmB;4BACnB,eAAe;;;;;iDAGjB,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,4OAAa;wCAAC,WAAU;;;;;;kDACzB,6LAAC;wCAAE,WAAU;kDAAwB;;;;;;;;;;;;;;;;;;;;;;oBAO5C,iBAAiB,gCAChB,6LAAC,oIAAI;wBAAC,WAAU;kCACd,cAAA,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,oKAAa;gCAEZ,QAAQ;gCACR,UAAU;gCACV,WAAW;oCACT,iBAAiB;oCACjB,+JAAK,CAAC,OAAO,CAAC;gCAChB;gCACA,UAAU;oCACR,iBAAiB;gCACnB;+BATK;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBrB;GAjHwB;;QAEpB,gKAAgB;;;KAFI","debugId":null}}]
}